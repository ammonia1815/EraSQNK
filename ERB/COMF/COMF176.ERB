@COM176
;밀려넘어진다

IF TALENT:라미아
	PRINTL 휘감긴다
ELSE
	PRINTL 밀려넘어진다
ENDIF

;-------------------------------------------------
;実行できるかの判定
;-------------------------------------------------
CALL SHOW_COM_ORDER_COM, 176

;実行できない
SIF TCVAR:28 == 0
	RETURN 0
;-------------------------------------------------
;実行決定
;-------------------------------------------------
CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = 밀려넘어진다

;押し倒され状態の付与
TEQUIP:넘어뜨리기 = 1

RETURN 1

@FLAG_COM176, ARG

@SOURCE_COM176, ARG
VARSET LOCAL

LOCAL:20 += 60
LOCAL:21 += 150

LOCAL:12 = 400

;ABL:봉사정신をみる
SELECTCASE ABL:봉사정신
CASE 0
	LOCAL:4 = 200
	LOCAL:5 = 50
CASE 1
	LOCAL:4 = 250
	LOCAL:5 = 200
CASE 2
	LOCAL:4 = 350
	LOCAL:5 = 550
CASE 3
	LOCAL:4 = 450
	LOCAL:5 = 900
CASE 4
	LOCAL:4 = 600
	LOCAL:5 = 1500
CASEELSE
	LOCAL:4 = 750
	LOCAL:5 = 2200
ENDSELECT

;ABL:Ｖ감각をみる
SELECTCASE ABL:Ｖ감각
CASE 0
	LOCAL:3 = 25
	TIMES LOCAL:4 , 0.50
CASE 1
	LOCAL:3 = 75
	TIMES LOCAL:4 , 0.80
CASE 2
	LOCAL:3 = 125
	TIMES LOCAL:4 , 1.00
CASE 3
	LOCAL:3 = 175
	TIMES LOCAL:4 , 1.20
CASE 4
	LOCAL:3 = 300
	TIMES LOCAL:4 , 1.50
CASEELSE
	LOCAL:3 = 425
	TIMES LOCAL:4 , 2.00
ENDSELECT

;PALAM:욕정
SELECTCASE PALAM:욕정
CASE IS < PALAMLV:1
	TIMES LOCAL:3 , 0.30
CASE IS < PALAMLV:2
	TIMES LOCAL:3 , 0.60
CASE IS < PALAMLV:3
	TIMES LOCAL:3 , 1.00
CASE IS < PALAMLV:4
	TIMES LOCAL:3 , 1.50
CASE IS < PALAMLV:5
	TIMES LOCAL:3 , 1.80
CASEELSE
	TIMES LOCAL:3 , 2.20
ENDSELECT

;ABL:순종をみる
SELECTCASE ABL:순종
CASE 0
	TIMES LOCAL:3 , 0.60
	LOCAL:13 += 700
CASE 1
	TIMES LOCAL:3 , 0.80
	LOCAL:13 += 500
CASE 2
	LOCAL:13 += 300
CASE 3
	TIMES LOCAL:3 , 1.20
	LOCAL:13 += 100
CASE 4
	TIMES LOCAL:3 , 1.40
	LOCAL:13 += 30
CASEELSE
	TIMES LOCAL:3 , 1.60
ENDSELECT

CALL CALC, "조교소스", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM176
;라미아
IF TALENT:라미아
	PRINTFORMW 요염하게 미소지으면서 %조사처리(CALLNAME:TARGET,"가")% %CALLNAME:PLAYER%에게 긴 꼬리를 휘감아온다… 
	PRINTFORMW %CALLNAME:PLAYER%의 움직임이 봉쇄되어버렸다…
;それ以外
ELSE
	IF INSERT("인서트")
		PRINTFORMW 요염하게 미소지으면서 %조사처리(CALLNAME:TARGET,"가")% %조사처리(CALLNAME:PLAYER,"를")% 밀어서 억누른다…
	ELSE
		PRINTFORMW 요염하게 미소지으면서 %조사처리(CALLNAME:TARGET,"가")% %CALLNAME:PLAYER%에게 다가왔다…
	ENDIF
	PRINTFORMW %조사처리(CALLNAME:PLAYER,"는")% 밀려넘어지고말았다…
ENDIF


@EQUIP_COM30
;쓰러뜨려짐중
CALL SOURCE_COM176, 20
SIF STATE("바인드", PLAYER)
	EXP:PLAYER:긴박경험 += 1

RETURN 1

@EQUIP_COM30_2
;쓰러뜨려짐중
PRINTL ＜쓰러뜨려짐중＞

RETURN 1


@COM_ORDER_COM176, ARG
VARSET LOCAL
LOCALS = 

;すべての命令に共通の요정素を考慮
;(순종が高いと命令に従いやすいなど)
CALL COM_ORDER, ARG

LOCAL = RESULT

;ABL:봉사정신
IF ABL:봉사정신
	LOCAL += ABL:봉사정신 * 4
	LOCALS = %LOCALS% + %ABLNAME:6%LV{ABL:봉사정신}({ABL:봉사정신 * 4})
ENDIF
;ABL:정액중독
IF ABL:정액중독
	LOCAL += ABL:정액중독 * 3
	LOCALS = %LOCALS% + %ABLNAME:11%LV{ABL:정액중독}({ABL:정액중독 * 3})
ENDIF
;강기
IF TALENT:강기
	LOCAL += 10
	LOCALS = %LOCALS% + %TALENTNAME:18%(10)
ENDIF
;부끄럼쟁이
IF TALENT:부끄럼쟁이
	LOCAL -= 5
	LOCALS = %LOCALS% - %TALENTNAME:35%(5)
ENDIF
;쾌감을부정
IF TALENT:쾌감을부정
	LOCAL -= 1
	LOCALS = %LOCALS% - %TALENTNAME:71%(1)
ENDIF
;새드
IF TALENT:새드
	LOCAL += 5
	LOCALS = %LOCALS% + %TALENTNAME:83%(5)
ENDIF

;처녀
IF TALENT:처녀
	LOCAL -= 20
	LOCALS = %LOCALS% - %TALENTNAME:0%(20)
ELSEIF EXP:Ｖ경험 < EXPLV:2
	LOCAL -= 5
	LOCALS = %LOCALS% - %EXPNAME:0%부족(5)
ENDIF

;미약
IF TEQUIP:미약
	LOCAL += 6
	LOCALS = %LOCALS% + %ITEMNAME:31%(6)
ENDIF

;合計を表示(24이상で実行)
CALL PRINT_COM_ORDER_COM, LOCALS, ARG, LOCAL, 24

RETURN RESULT
