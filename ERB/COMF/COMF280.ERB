@COM280
;몸부림
CALL PRINT_TRAIN_NAME(SELECTCOM)

STR:0 = %STR:2%

;-------------------------------------------------
;ソースの計算
;-------------------------------------------------
CALL SOURCE_COM280, 100

;FIRSTCOM플래그ON
CALL SET_CHOSECOM, TARGET, 280

;成否判定
SIF TFLAG:39 <= 0
	TFLAG:39 = 0

LOCAL = 2 + ABL:기교/2 + ABL:새드끼 - CFLAG:9*10

SIF TALENT:강기
	LOCAL += 1
SIF TALENT:장신
	LOCAL += 2
SIF TALENT:팔많음
	LOCAL += MAX(TALENT:팔많음/2, 1)
SIF TALENT:장사
	LOCAL += 3
SIF TALENT:호색
	LOCAL += 1
;체조복着用なら
SIF CHECK_SHIRT("체조복")
	LOCAL += 2
;縛って! MY MAID! 모드なら
SIF NO:TARGET == 46 && CFLAG:465 == 4
	LOCAL += 3
;二人で넘어뜨리기てるなら
SIF TEQUIP:Ｗ넘어뜨리기
	LOCAL += 5
;縛られているなら
SIF TEQUIP:PLAYER:구속 || STATE("바인드", PLAYER)
	LOCAL += 5
SIF TEQUIP:러브트랩
	LOCAL += 3
;기승위で인서트状態
SIF INSERT("기승위")
	LOCAL += 5
SIF STATE("센시브", PLAYER)
	LOCAL += 5
SIF CONFIG("ＨＡＲＤ")
	LOCAL = MAX(LOCAL + 5, 10)
;前ターンの절정具合
	LOCAL += PREVEX("사정", PLAYER) * 2

;악세사리効果（기교）
SIF TALENT:PLAYER:기교강화 > 0
	LOCAL = DIVIDE(LOCAL, 100 + TALENT:PLAYER:기교강화)

;기력による보정
LOCAL = LOCAL * (BASE:기력*2 + MAXBASE:기력) / (MAXBASE:기력*3)

;マイナス보정はこの後
SIF TALENT:작은몸집
	LOCAL -= 1
;前ターンの절정具合
LOCAL -= PREVEX("절정수합계") * 2

;PLAYER側の보정
SIF TALENT:PLAYER:장사
	LOCAL -= 5

PRINTFORML 
IF ABL:PLAYER:기교 + TFLAG:39 + STATE("에올군", PLAYER)*3 > LOCAL
	TFLAG:39 = 0
	IF TEQUIP:PLAYER:구속 || STATE("바인드", PLAYER)
		PRINTFORMW %조사처리(CALLNAME:PLAYER,"는")% 간신히 구속에서 도망쳤다! 
		TEQUIP:PLAYER:구속 = 0
		CALL REMOVE_STATE, PLAYER, "바인드"
	ELSE
		PRINTFORM %조사처리(CALLNAME:PLAYER,"는")% 
		SIF PREVEX("절정수합계")
			PRINTFORM , 절정의 여운에 젖어 있는%CALLNAME:TARGET%의 틈바구니에서 
		PRINTFORMW 주도권을 되찾았다! 
		CVARSET TEQUIP, 30, 0
		CALL KOJO_MESSAGE_COM
		;Ｗ넘어뜨리기等での구상処理
		CALL KOJO_MESSAGE_COM_MULTI
		;조수との인서트はここで解消
		CALL SETFLAG, "Ｗ넘어뜨리기解除"
		CALL SETFLAG, "今回조교커맨드"
		;러브트랩も解除
		CVARSET TEQUIP, 29, 0
		;TARGETにPLAYERが인서트中なら정상위に移行
		IF INSERT("Ｖ인서트", TARGET, PLAYER)
			CALL SET_INSERT, TARGET, PLAYER, 60
		ELSEIF INSERT("Ａ인서트", TARGET, PLAYER)
			CALL SET_INSERT, TARGET, PLAYER, 70
		ELSEIF INSERT("요도인서트", TARGET, PLAYER)
			CALL SET_INSERT, TARGET, PLAYER, 83
		ENDIF
	ENDIF
	RETURN 0
ELSE
	;前回の조교によって文章変化
	;안면기승系
	IF PREVCOM == 1 || PREVCOM == 9 || TEQUIP:안면기승 || TEQUIP:식스나인
		PRINTFORM 얼굴에 걸터앉아있는 %조사처리(CALLNAME:TARGET,"를")% 밀쳐내, 
	;逆이라마치오
	ELSEIF PREVCOM == 4
		PRINTFORM %CALLNAME:PLAYER%의 입을 범하고있다 %CALLNAME:TARGET%에서, 
	;봉사系
	ELSEIF (PREVCOM == 90 || PREVCOM == 91 || PREVCOM == 92 || PREVCOM == 95 || PREVCOM == 97 || PREVCOM == 99) && PENIS(PLAYER)
		SIF PREVCOM == 90 || PREVCOM == 91 || PREVCOM == 92 || PREVCOM == 99
			PRINT 덮쳐들어서 
		PRINTFORM 페니스를 갖고노는 %CALLNAME:TARGET%에게서, 
	;기승위系
	ELSEIF (PREVCOM >= 65 && PREVCOM <= 67) || PREVCOM == 75 || PREVCOM == 80 || PREVCOM == 98 || PREVCOM == 120 || PREVCOM == 126
		PRINTFORM %조사처리(CALLNAME:PLAYER,"를")% 범하며 즐기고 있는 %CALLNAME:TARGET%에게서, 
	;애널봉사系
	ELSEIF PREVCOM == 96
		PRINTFORM 애널을 갖고노는 %CALLNAME:TARGET%에게서, 
	ELSE
		PRINTFORM %조사처리(CALLNAME:PLAYER,"는")% 
	ENDIF
	PRINTFORML 가까스로 주도권을 되찾으려고 했지만, \@ TEQUIP:Ｗ넘어뜨리기 ? %CALLNAME:TARGET%들은 # %조사처리(CALLNAME:TARGET,"는")% \@ 빈틈을 보이지 않는다. 
	IF TEQUIP:키스 && ABL:욕망 >= 3 && RAND:3 == 0
		PRINTFORMW 그 뿐만 아니라,%CALLNAME:TARGET%(은)는 %CALLNAME:PLAYER%의 입술을 빼앗으면, 혀를 걸어 타액을 충분히 흘려 넣어 먹여 왔다！
		CALL SETFLAG, "추가키스플래그", TARGET
	ELSE
		PRINTFORMW 그 뿐만 아니라, 한층 더%CALLNAME:PLAYER%를 공격해 왔다！
	ENDIF
	TFLAG:39 += 1 + RAND:2
	BASE:PLAYER:정력 -= 1
	PRINTFORML 정력-1\@ ASSIPLAY ? （%TEXTS("조수の명칭")%） # (%CALLNAME:PLAYER%)\@
	CALL KOJO_MESSAGE_COM
	PRINTL 

	CALL SET_COUNTER_ABL

	SIF TEQUIP:Ｗ넘어뜨리기
		CALL SET_SELECTCOM_MULTI, "Ｗ넘어뜨리기"

	TRYJUMPFORM COM{SELECTCOM}
ENDIF

RETURN 1

@FLAG_COM280, ARG

@SOURCE_COM280, ARG
VARSET LOCAL

LOCAL:20 += 30
LOCAL:21 += 50

LOCAL:4 = 160

;PALAM:욕정をみる
SELECTCASE PALAM:욕정
CASE IS < PALAMLV:1
	TIMES LOCAL:4 , 1.00
CASE IS < PALAMLV:2
	TIMES LOCAL:4 , 1.20
CASE IS < PALAMLV:3
	TIMES LOCAL:4 , 1.40
CASE IS < PALAMLV:4
	TIMES LOCAL:4 , 1.60
CASE IS >= PALAMLV:4
	TIMES LOCAL:4 , 1.80
ENDSELECT

;ABL:새드ッ気をみる
SELECTCASE ABL:새드끼
CASE 0
CASE 1
	TIMES LOCAL:4 , 1.20
CASE 2
	TIMES LOCAL:4 , 1.40
CASE 3
	TIMES LOCAL:4 , 1.60
CASE 4
	TIMES LOCAL:4 , 1.80
CASEELSE
	TIMES LOCAL:4 , 2.00
ENDSELECT

LOCAL:11 += LOCAL:4
LOCAL:12 += LOCAL:4

CALL CALC, "조교소스", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG

