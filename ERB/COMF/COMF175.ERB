@COM175
;갈아입히기
CALL PRINT_TRAIN_NAME(SELECTCOM)

;-------------------------------------------------
;実行できるかの判定
;-------------------------------------------------
CALL SHOW_COM_ORDER_COM, 175

;実行できない
SIF TCVAR:28 == 0
	RETURN 0
;-------------------------------------------------
;갈아입히기の플래그, スクリプト, 説明等
;基本的に, 몽마の옷は短編のものに準じることにします. 
;-------------------------------------------------
CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = %STR:2%

RETURN 1

@FLAG_COM175, ARG

@SOURCE_COM175, ARG
VARSET LOCAL

LOCAL:20 += 50
LOCAL:21 += 50

LOCAL:3 = 100

;ABL:노출벽をみる
SELECTCASE ABL:노출벽
CASE 0
	LOCAL:12 += 100
	LOCAL:13 += 100
CASE 1
	LOCAL:11 += 150
	LOCAL:12 += 500
	LOCAL:13 += 300
CASE 2
	LOCAL:11 += 300
	LOCAL:12 += 100
	LOCAL:13 += 50
CASE 3
	LOCAL:11 += 600
	LOCAL:12 += 50
CASE 4
	LOCAL:11 += 1000
CASEELSE
	LOCAL:11 += 2000
ENDSELECT
;ABL:순종をみる
SELECTCASE ABL:순종
CASE 0
CASE 1
	TIMES LOCAL:3 , 1.20
CASE 2
	TIMES LOCAL:3 , 1.40
CASE 3
	TIMES LOCAL:3 , 1.50
CASE 4
	TIMES LOCAL:3 , 2.10
CASEELSE
	TIMES LOCAL:3 , 3.00
ENDSELECT

LOCAL:16 += LOCAL:3

CALL CALC, "조교소스", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM175
IF TEQUIP:넘어뜨리기 || ( (TEQUIP:구속 || TEQUIP:관내노출플레이 || TEQUIP:야외플레이) && (ABL:순종 >= 4 || ABL:노출벽 >= 3) )
	IF EQUIP:팬티 && EQUIP:보디슈츠 + EQUIP:겉옷 == 0 && CHECK_CLO("팬티노출")
		PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% 팬티를 벗었다…
		CALL SET_PANTIES, TARGET
	ELSEIF CHECK_CLO("알몸") == 0
		PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% 옷을 벗고 알몸이 되었다…
		CALL SETFLAG, "전부벗긴다", TARGET
	ENDIF
ELSEIF TEQUIP:구속 || TEQUIP:관내노출플레이 || TEQUIP:야외플레이
	IF EQUIP:팬티 && EQUIP:보디슈츠 + EQUIP:겉옷 == 0 && CHECK_CLO("팬티노출")
		PRINTFORMW %조사처리(CALLNAME:PLAYER,"는")% %CALLNAME:TARGET%의 팬티를 재빠르게 벗겼다…
		CALL SET_PANTIES, TARGET
	ELSEIF CHECK_CLO("알몸") == 0
		PRINTFORMW %조사처리(CALLNAME:PLAYER,"는")% %CALLNAME:TARGET%의 옷을 억지로 벗겨 알몸으로 만들었다…
		CALL SETFLAG, "전부벗긴다", TARGET
	ENDIF
ELSE
	CALL KISEKAE
ENDIF

@KISEKAE
#DIM LCOUNT
#DIM MEMO_LINECOUNT

;着ていた옷を記憶
FOR LCOUNT, 40, 50
	LOCAL:LCOUNT = EQUIP:LCOUNT
	LOCALS:LCOUNT = %CSTR:LCOUNT%
NEXT
LOCAL:30 = CHECK_CLO("알몸")

$START_KISEKAE

MEMO_LINECOUNT = LINECOUNT

REDRAW 0

DRAWLINE
PRINTFORML %CALLNAME:TARGET%에게 무엇을 갈아입게 합니까? 
PRINTFORML 
	PRINTFORML  [ 0] 코디네이트
	PRINTFORML  [ 1] 의상
SIF COND("다리 사용")
	PRINTFORML  [ 2] 보디슈츠, 원피스수영복 등
	PRINTFORML  [ 3] 속옷, 세퍼레이트수영복 등
SIF COND("다리 사용")
	PRINTFORML  [ 4] 블루머, 스패츠, 팬티스타킹 등
SIF COND("다리 사용")
	PRINTFORML  [ 5] 양말 등
SIF COND("손가락 사용")
	PRINTFORML  [ 6] 글러브
SIF COND("신발の着用")
	PRINTFORML  [ 7] 신발
	PRINTFORML  [ 8] 악세사리

;SIF EQUIP:스커트 && !CHECK_SKIRT("원피스")
;	PRINTFORML  [10] 치마를 벗게한다

SIF EQUIP:팬티 + EQUIP:브래지어 && EQUIP:양말 && CHECK_SOCKS("가터")
	PRINTFORML  [90] 가터의 색을 속옷에 맞춘다
SIF CHECK_CLO("알몸") == 0
	PRINTFORML  [98] 알몸으로 만든다
SIF CHECK_CLO("全裸") == 0
	PRINTFORML  [99] 전부 벗긴다

PRINTFORM  현재：
CALL PRINT_DRESS, TARGET
PRINTL 
PRINTL 

PRINTFORM  현재의 복장을 마음에 드는 복장으로 등록한다(등록된 번호는 
CALL PRINT_COLORTEXT, "노란 색", DEF_COLOR("황색")
PRINTFORML 으로 표시됩니다)
FOR LCOUNT, 0, 10
	PRINTFORM  [{70 + LCOUNT, 2}] 
	SIF GETBIT(IS_FAVORITE_DRESS(TARGET), LCOUNT)
		SETCOLOR DEF_COLOR("황색")

	PRINTFORM {LCOUNT}번

	SELECTCASE LCOUNT
	CASE 4
		PRINTFORML 
	CASE 5
		PRINTFORM (낮용)
	CASE 6
		PRINTFORM (밤용)
	CASE 7
		PRINTFORM (수영복)
	CASE 8
		PRINTFORM (외출)
	CASE 9
		PRINTFORML (목욕)
	CASEELSE
		PRINTFORM 　　　
	ENDSELECT

	RESETCOLOR
NEXT

SIF IS_FAVORITE_DRESS(TARGET)
	PRINTFORML  [80] 마음에 드는 옷으로 갈아입힌다（제모도 이쪽）

PRINTFORML 
PRINTFORML [100] 이것으로 ＯＫ
PRINTFORML [999] 갈아입히기와 관련된 컨피그를 연다

$INPUT_LOOP
INPUT

IF RESULT == 100
	;옷を着替えたなら, それの感想
	IF EQUIP:웃옷 && EQUIP:웃옷 != LOCAL:42 && CSTR:42 != LOCALS:42
		TFLAG:16 = 1
	;보디슈츠を着替えたなら, それの感想
	ELSEIF EQUIP:보디슈츠 && EQUIP:보디슈츠 != LOCAL:44 && CSTR:44 != LOCALS:44
		TFLAG:16 = 1
	;수영복に着替えたなら, その感想
	ELSEIF CHECK_CLO("수영복차림") && EQUIP:팬티 != LOCAL:40 && CSTR:40 != LOCALS:40
		TFLAG:16 = 1
	;겉옷を着替えたなら, それの感想
	ELSEIF EQUIP:겉옷 && EQUIP:겉옷 != LOCAL:45 && CSTR:45 != LOCALS:45
		TFLAG:16 = 5
	;알몸になったなら, それの感想
	ELSEIF CHECK_CLO("알몸") && CHECK_CLO("알몸") != LOCAL:30
		TFLAG:16 = 2
	;팬티を着替えたor脱いだなら, それの感想
	ELSEIF EQUIP:팬티 != LOCAL:40 && CSTR:40 != LOCALS:40
		IF EQUIP:팬티
			TFLAG:16 = 3
		ELSE
			TFLAG:16 = 4
		ENDIF
	;브래지어だけ替えたor外した
	ELSEIF EQUIP:브래지어 != LOCAL:41 && CSTR:41 != LOCALS:41
		TFLAG:16 = 9
	;장갑を替えたor外した
	ELSEIF EQUIP:장갑 != LOCAL:48 && CSTR:48 != LOCALS:48
		TFLAG:16 = 6
	;양말を替えたor外した
	ELSEIF EQUIP:양말 != LOCAL:46 && CSTR:46 != LOCALS:46
		TFLAG:16 = 7
	;신발だけ替えたor外した
	ELSEIF EQUIP:신발 != LOCAL:47 && CSTR:47 != LOCALS:47
		TFLAG:16 = 8
	;その他小物だけ替えたor外した
	ELSEIF EQUIP:악세사리 != LOCAL:49
		TFLAG:16 = 9
	ELSE
		TFLAG:14 = 1
		;何も変えなかったか체크
		FOR LCOUNT, 42, 46
			IF LOCAL:LCOUNT != EQUIP:LCOUNT && LOCALS:LCOUNT != CSTR:LCOUNT
				TFLAG:14 = 0
				BREAK
			ENDIF
		NEXT
	ENDIF
	REDRAW 1
	RETURN 0
ELSEIF RESULT == 0
	CALL COORDINATE
ELSEIF RESULT == 1
	CALL SELECT_SHIRT
ELSEIF RESULT == 2 && COND("다리 사용")
	CALL SELECT_BODYSUIT
ELSEIF RESULT == 3
	CALL SELECT_PANTU
ELSEIF RESULT == 4 && COND("다리 사용")
	CALL SELECT_OUTER
ELSEIF RESULT == 5 && COND("다리 사용")
	CALL SELECT_SOCKS
ELSEIF RESULT == 6 && COND("손가락 사용")
	CALL SELECT_GLOVE
ELSEIF RESULT == 7 && COND("신발の着用")
	CALL SELECT_SHOES
ELSEIF RESULT == 8
	CALL SELECT_OTHER
;스커트の細分化はまた今度
;ELSEIF RESULT == 10 && EQUIP:스커트 && !CHECK_SKIRT("원피스")
;	CALL SET_SKIRT, TARGET
ELSEIF RESULT == 90 && EQUIP:팬티 + EQUIP:브래지어 && EQUIP:양말 && CHECK_SOCKS("가터")
	IF EQUIP:팬티
		CALL SAME_COLOR, TARGET, 40, 46
	ELSE
		CALL SAME_COLOR, TARGET, 41, 46
	ENDIF
ELSEIF RESULT == 98 && CHECK_CLO("알몸") == 0
	CALL EVENT_DATUI_HADAKA
ELSEIF RESULT == 99 && CHECK_CLO("全裸") == 0
	CALL EVENT_DATUI_HADAKA
	CALL SETFLAG, "衣装全脱ぎ", TARGET
ELSEIF RESULT >= 70 && RESULT <= 79
	PRINTFORML 현재의 복장을 마음에 드는 복장으로 설정
	LOCAL = RESULT%70
	CALL MEMO_FAVORITE_DRESS, TARGET, LOCAL
;	PRINTFORM 마음에듬の{LOCAL}番を
;	CALL PRINT_FAVORITE_DRESS, LOCAL
;	PRINTFORMW にしました
	CLEARLINE LINECOUNT - MEMO_LINECOUNT
	PRINTFORM 마음에 드는 복장 {LOCAL}번：
	CALL PRINT_FAVORITE_DRESS, LOCAL
	PRINTFORML 
ELSEIF RESULT == 80 && IS_FAVORITE_DRESS(TARGET)
	;初期表示は갈아입히기を選ぶ모드
	FLAG:271 = 0
	CALL SELECT_FAVORITE_DRESS
ELSEIF RESULT == 999
	CALL SETCONFIG, "갈아입히기설정"
ELSE
	GOTO INPUT_LOOP
ENDIF

GOTO START_KISEKAE


;-------------------------------------------------
;마음에듬関連の関数
;-------------------------------------------------
@SELECT_FAVORITE_DRESS
#DIM LCOUNT
#DIM MEMO_LINECOUNT

MEMO_LINECOUNT = LINECOUNT
REDRAW 0
PRINTL 
SELECTCASE FLAG:271
CASE 0
	PRINTFORML 어느 의상을 선택하시겠습니까？
CASE 1
	PRINTFORML 어느 번호를 미등록 상태로 되돌립니까？
ENDSELECT
PRINTFORML (낮, 밤, 수영복, 외출, 목욕은 대응하는  ＴＰＯ에 우선해서 선택되는 의상입니다)

FOR LCOUNT, 0, 10
	SETCOLOR DEF_COLOR("황색")
	SELECTCASE LCOUNT
	CASE 5
		PRINTFORM 낮용
	CASE 6
		PRINTFORM 밤용
	CASE 7
		PRINTFORM 수영복
	CASE 8
		PRINTFORM 외출
	CASE 9
		PRINTFORM 목욕
	CASEELSE
		PRINTFORM 　　
	ENDSELECT
	RESETCOLOR
	IF GETBIT(IS_FAVORITE_DRESS(TARGET), LCOUNT)
		PRINTFORM  [{LCOUNT, 2}] 
		CALL PRINT_FAVORITE_DRESS, LCOUNT
	ELSE
		SETCOLOR DEF_COLOR("회색")
		PRINTFORM  [×] 미등록
		RESETCOLOR
	ENDIF
	PRINTFORML 
NEXT
PRINTFORML  [100] 돌아간다
SELECTCASE FLAG:271
CASE 0
	PRINTFORML  [200] 소거모드로
CASE 1
	PRINTFORML  [200] 의상선택모드로
ENDSELECT



CALL INPUT_SELECT, 10, 100, 200
LOCAL = RESULT

SELECTCASE LOCAL
CASE 100
	REDRAW 1
	RETURN 0
CASE 200
	INVERTBIT FLAG:271, 0
CASEELSE
	SELECTCASE FLAG:271
	CASE 0
		IF GETBIT(IS_FAVORITE_DRESS(TARGET), LOCAL)
			CALL SET_FAVORITE_DRESS, TARGET, LOCAL
			REDRAW 1
			RETURN 0
		ENDIF
	CASE 1
		CSTR:(50 + LOCAL) = %TEXTS("全裸상태")%
	ENDSELECT
ENDSELECT

CLEARLINE LINECOUNT - MEMO_LINECOUNT
RESTART

@MEMO_FAVORITE_DRESS, ARG, ARG:1
;CSTR:(50 + ARG:1) に全ての衣装の情報を入れる
CSTR:ARG:(50 + ARG:1) = 
FOR LOCAL, 40, 50
	CSTR:ARG:(50 + ARG:1) = %CSTR:ARG:(50 + ARG:1)%{EQUIP:ARG:LOCAL},%CSTR:ARG:LOCAL%,
NEXT


@PRINT_FAVORITE_DRESS, ARG
#DIM LCOUNT
FOR LCOUNT, 40, 50
	LOCAL:(LCOUNT-30) = STAIN:(LCOUNT-30)
	LOCAL:LCOUNT = EQUIP:LCOUNT
	LOCALS:LCOUNT = %CSTR:LCOUNT%
NEXT

CALL SET_FAVORITE_DRESS, TARGET, ARG
CALL PRINT_DRESS, TARGET

FOR LCOUNT, 40, 50
	STAIN:(LCOUNT-30) = LOCAL:(LCOUNT-30)
	EQUIP:LCOUNT = LOCAL:LCOUNT
	CSTR:LCOUNT = %LOCALS:LCOUNT%
NEXT


@SET_FAVORITE_DRESS, ARG, ARG:1
#DIM LCOUNT

CALL SETFLAG, "衣装全脱ぎ", ARG

VARSET LOCALS
SPLIT CSTR:ARG:(50 + ARG:1), ",", LOCALS

FOR LCOUNT, 0, 10
	EQUIP:ARG:(LCOUNT + 40) = TOINT(LOCALS:(LCOUNT*2) )
	CSTR:ARG:(LCOUNT + 40) = %LOCALS:(LCOUNT*2 + 1)%
NEXT

@IS_FAVORITE_DRESS(ARG)
#FUNCTION
#DIM LCOUNT

;何も衣装を身に着けていないとこうなる
LOCALS = %TEXTS("全裸상태")%

LOCAL = 0
FOR LCOUNT, 0, 10
	SELECTCASE CSTR:ARG:(LCOUNT + 50)
	CASE "", LOCALS
	CASEELSE
		SETBIT LOCAL, LCOUNT
	ENDSELECT
NEXT
RETURNF LOCAL

;-------------------------------------------------
;キャラARG:1のARG番の마음에듬の衣装がARGS(これには신발とかEQUIPで用いる名称が入る)を설정されているかを체크する
;-------------------------------------------------
@CHECK_FAVORITE(ARGS, ARG, ARG:1)
#FUNCTION
SIF ARG:1 == 0 && TARGET
	ARG:1 = TARGET

LOCAL = 0

SIF CSTR:(ARG:1):(50 + ARG) == TEXTS("全裸상태")
	RETURNF LOCAL

VARSET LOCALS
SPLIT CSTR:(ARG:1):(50 + ARG), ",", LOCALS

SELECTCASE ARGS
CASE "팬티"
	LOCAL = TOINT(LOCALS:0)
CASE "브래지어"
	LOCAL = TOINT(LOCALS:2)
CASE "웃옷"
	LOCAL = TOINT(LOCALS:4)
CASE "스커트"
	LOCAL = TOINT(LOCALS:6)
CASE "보디슈츠"
	LOCAL = TOINT(LOCALS:8)
;팬티스타킹はここ
CASE "겉옷"
	LOCAL = TOINT(LOCALS:10)
CASE "양말"
	LOCAL = TOINT(LOCALS:12)
CASE "신발"
	LOCAL = TOINT(LOCALS:14)
CASE "장갑"
	LOCAL = TOINT(LOCALS:16)
;メガネなど, その他（これに限りビット管理）
CASE "악세사리"
	LOCAL = TOINT(LOCALS:18)
ENDSELECT

RETURNF LOCAL

;-------------------------------------------------
;上の関数の文字列版
;キャラARG:1のARG番の마음에듬の衣装がARGS(これには신발とかEQUIPで用いる名称が入る)を설정されているかを체크する
;-------------------------------------------------
@CHECK_FAVORITES(ARGS, ARG, ARG:1)
#FUNCTIONS
SIF ARG:1 == 0 && TARGET
	ARG:1 = TARGET
LOCALS = 

SIF CSTR:(ARG:1):(50 + ARG) == TEXTS("全裸상태")
	RETURNF LOCALS

VARSET LOCALS
SPLIT CSTR:(ARG:1):(50 + ARG), ",", LOCALS

SELECTCASE ARGS
CASE "팬티"
	LOCALS = %LOCALS:1%
CASE "브래지어"
	LOCALS = %LOCALS:3%
CASE "웃옷"
	LOCALS = %LOCALS:5%
CASE "스커트"
	LOCALS = %LOCALS:7%
CASE "보디슈츠"
	LOCALS = %LOCALS:9%
;팬티스타킹はここ
CASE "겉옷"
	LOCALS = %LOCALS:11%
CASE "양말"
	LOCALS = %LOCALS:13%
CASE "신발"
	LOCALS = %LOCALS:15%
CASE "장갑"
	LOCALS = %LOCALS:17%
;メガネなど, その他（これに限りビット管理）
CASE "악세사리"
	LOCALS = %LOCALS:19%
ENDSELECT

RETURNF LOCALS

;-------------------------------------------------
;下着だけを脱いでもらった時の텍스트
;上半身が브래지어だけなら브래지어も脱ぎます
;-------------------------------------------------
@EVENT_DATUI_PANTU, ARGS
SELECTCASE ARGS
CASE "브래지어"
	PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% \@ CHECK_CLO("수영복차림") ? 수영복의 상의를 벗었다 # 브래지어를 벗었다 \@…
CASEELSE
	IF TALENT:음란 && RAND:3 == 0 && CHECK_CLO("팬티노출")
		PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% %CALLNAME:PLAYER% 쪽을 향해 엉덩이를 돌리고, 가랑이를 과시하듯이 상체를 앞으로 굽히고 팬티를 내렸다…
	ELSEIF (ABL:노출벽 - TALENT:부끄럼쟁이 + TALENT:부끄럼없음 >= 3 || TALENT:호색) && CHECK_CLO("팬티노출")
		PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 
		IF (ABL:노출벽 >= 3 || TALENT:호색 || TALENT:헌신) && CHECK_SKIRT("롱")
			PRINTFORM %SKIRT(TARGET, 1)%의 끝을 입에 물어 하복부를 드러낸 자세로 팬티를 벗는 모습을 보이며, 
		ELSE
			PRINTFORM 스르륵 팬티를 벗고, 
		ENDIF
		IF RAND:2 && EQUIP:스커트 && CHECK_SKIRT("롱") == 0
			PRINTFORMW %조사처리(SKIRT(TARGET, 1),"를")% 걷어올려 무방비한 가랑이를 %CALLNAME:PLAYER%에게 과시해왔다…
		ELSEIF PENIS(TARGET) == 0 && (ABL:노출벽 >= 3 || TALENT:호색) && CHECK_PANTIES("蒸れ")
			IF CHECK_PANTIES("染み") && RAND:3
				IF RAND:3 == 0
					PRINT 더러운 
				ELSEIF RAND:2
					PRINT 부끄러운 얼룩이 진 
				ELSE
					PRINT 애액으로 젖은 
				ENDIF
			ELSE
				PRINTFORM %조사처리(TEXTS("匂い"),"가")% 배어들은
			ENDIF
			PRINTFORM 가랑이부분을 
			IF TALENT:부끄럼쟁이
				IF RAND:2
					PRINT 귀끝까지 얼굴을 붉히면서 
				ELSE
					PRINT 부끄러운 듯이 
				ENDIF
			ELSE
				IF TALENT:양기 + TALENT:호색 + TALENT:소악마 && RAND:3 == 0
					PRINT 실뜨기를 하는 듯한 손놀림으로 
				ELSEIF RAND:2
					PRINT 히죽히죽 거리면서 
				ELSE
					PRINT 즐거운듯이 
				ENDIF
			ENDIF
			IF TALENT:양기 + TALENT:호색 + TALENT:소악마 && RAND:3
				PRINTFORMW %CALLNAME:PLAYER%에게 과시해왔다…
			ELSE
				PRINTFORMW %CALLNAME:PLAYER%에게 과시해왔다…
			ENDIF
		ELSEIF CHECK_PANTIES("蒸れ")
			PRINTFORMW 따뜻하고 습한 그것을 %CALLNAME:PLAYER%에게 건네왔다…
		ELSE
			PRINTFORMW 온기가 남아있는 그것을 %CALLNAME:PLAYER%에게 건네왔다…
		ENDIF
	ELSEIF TALENT:부끄럼쟁이
		IF MARK:굴복각인 < 3
			PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% %CALLNAME:PLAYER%에게 보이지 않도록 주의해서, 부스럭 부스럭 속옷을 벗었다…
		ELSE
			PRINTFORMW %조사처리(CALLNAME:PLAYER,"는")% 얼굴이 붉어진 %CALLNAME:TARGET%의 속옷을 천천히 벗겼다…
		ENDIF
	ELSE
		PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% \@ CHECK_CLO("수영복차림") ? 수영복 # 속옷 \@을 벗었다…
	ENDIF
ENDSELECT

SELECTCASE ARGS
CASE "브래지어"
	CALL SET_BRA, TARGET
CASE "팬티"
	CALL SET_PANTIES, TARGET
CASEELSE
	CALL SET_BRA, TARGET
	CALL SET_PANTIES, TARGET
ENDSELECT

;-------------------------------------------------
;옷を脱いでもらった時の텍스트
;-------------------------------------------------
@EVENT_DATUI_FUKU
PRINTFORM %CALLNAME:TARGET%
;부끄럼쟁이
IF TALENT:부끄럼쟁이 && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 때때로 부끄러운 듯이 미소지으면서, 
;거유 && RAND:3 == 0
ELSEIF TALENT:거유
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 가슴과 엉덩이를 강조하듯이 과시하면서, 
;プライド高い, 소악마, 매력
ELSEIF (TALENT:교만 || TALENT:소악마 || TALENT:매혹) && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 초조하게 만들듯이, 
;음란
ELSEIF TALENT:음란 && EQUIP:팬티 && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% %CALLNAME:PLAYER%에게 자신의 \@ CHECK_CLO("수영복차림") ? 수영복 # 속옷 \@차림을 감상하게 하면서, 
ELSEIF RAND:2 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% %조사처리(CALLNAME:PLAYER,"를")% 곁눈질로 보면서, 
ELSE 
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 즐거운듯이, 
ENDIF
IF RAND:2 == 0 && EQUIP:웃옷 + EQUIP:보디슈츠
	PRINTFORM 옷을 벗고 
	IF EQUIP:팬티
		PRINTFORM \@ CHECK_CLO("수영복차림") ? 수영복 # 속옷 \@차림
	ELSE
		PRINTFORM 알몸
	ENDIF
	PRINTW 이 되었다…
ELSEIF RAND:2 == 0 && EQUIP:팬티
	PRINTW 팬티를 남기고 한장한장 천천히 벗었다…
ELSE
	PRINTW 천천히 벗었다…
ENDIF
CALL SET_SHIRT, TARGET
CALL SET_BODYS, TARGET

;알몸になってもらった時の텍스트
@EVENT_DATUI_HADAKA
PRINTFORM %CALLNAME:TARGET%
;부끄럼쟁이
IF TALENT:부끄럼쟁이 && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 때때로 부끄러운 듯이 미소지으면서, 
;거유
ELSEIF TALENT:거유 && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 가슴과 엉덩이를 강조하듯이 과시하면서, 
;プライド高い, 소악마, 매력
ELSEIF (TALENT:교만 || TALENT:소악마 || TALENT:매혹) && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 초조하게 만들듯이, 
;음란
ELSEIF TALENT:음란 && EQUIP:팬티 && RAND:3 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% %CALLNAME:PLAYER%에게 자신의 속옷차림을 감상시키면서, 
ELSEIF RAND:2 == 0
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% %조사처리(CALLNAME:PLAYER,"를")% 곁눈질로 보면서, 
ELSE 
	PRINTFORM %조사만처리(CALLNAME:TARGET,"는")% 즐거운듯이, 
ENDIF
IF EQUIP:양말 + EQUIP:신발 + EQUIP:장갑 && RANDIF(2, EQUIP:팬티, EQUIP:웃옷 + EQUIP:보디슈츠)
	IF EQUIP:장갑
		IF EQUIP:양말 + EQUIP:신발
			PRINTFORMW 손발의 의상만을 남기고 전부 벗었다…
		ELSE
			PRINTFORMW 장갑만을 남기고 전부 벗었다…
		ENDIF
	ELSEIF EQUIP:양말
		IF EQUIP:신발
			PRINTFORMW %조사처리(SHOES(TARGET, 1),"과")% %SOCKS(TARGET, 1)%만 남기고 전부 벗었다…
		ELSE
			PRINTFORMW %SOCKS(TARGET, 1)%만 남기고 전부 벗었다…
		ENDIF
	ELSE
		PRINTFORMW %SHOES(TARGET, 1)% 이외의 전부를 벗었다…
	ENDIF
ELSEIF EQUIP:웃옷 + EQUIP:보디슈츠 && RANDIF(2, EQUIP:팬티)
	PRINTW 옷을 벗고 알몸이 되었다…
ELSEIF EQUIP:팬티 && RAND:2
	PRINTW 팬티를 벗고 알몸이 되었다…
ELSE
	PRINTW 천천히 벗었다…
ENDIF
CALL SETFLAG, "전부벗긴다", TARGET

;-------------------------------------------------
;コーディネート関数
;-------------------------------------------------
@COORDINATE
#DIM LCOUNT
PRINTL 
VARSET LOCAL
PRINTFORML  [ 0] %CALLNAME:MASTER%의 Ｙ셔츠
LOCAL:0 = 1
FOR LCOUNT, 1, 50
	SIF LCOUNT >= 22 && COND("다리 사용") == 0
		CONTINUE
	SIF LCOUNT == 13 && (TALENT:작은몸집 == 0 || COND("다리 사용") == 0)
		CONTINUE
	IF ITEM:(499+LCOUNT)
		PRINTFORML  [{LCOUNT, 2}] %ITEMNAME:(499+LCOUNT)%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
;종족ごとの옷に使用
PRINTFORML  [99] %CALLNAME:TARGET% 자신의 의상
PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT < 50 && LOCAL:RESULT
	CALL COORDINATE_COS, RESULT
	IF CHECK_SHIRT("Ｙ셔츠")
		IF TALENT:작은몸집
			PRINTFORMW %CALLNAME:TARGET%에게 헐렁헐렁한, %CALLNAME:MASTER%의 Ｙ셔츠로 갈아입게 시켰습니다
			PRINTFORMW 워낙 소매에 여유가 있어서, 접어서 손이 나오도록 했습니다
		ELSE
			PRINTFORMW %CALLNAME:TARGET%에게 기장이 약간 긴, %CALLNAME:MASTER%의 Ｙ셔츠로 갈아입게 시켰습니다
			IF TALENT:부끄럼없음 || RAND:6 == 0
				PRINTFORM 밑단의 겹쳐지는 곳으로 힐끔힐끔 보이는 
				IF EQUIP:팬티 && COND("다리 사용")
					LASTWORD = 팬티
				ELSE
					IF COND("음모") >= 5
						LASTWORD = 수풀
					ELSEIF COND("음모") == 4
						LASTWORD = 면도자국
					ELSE
						IF COND("음모") && PENIS(TARGET) == 0 && RAND:2 == 0
							LASTWORD = 맨들맨들한 그곳
						ELSE
							LASTWORD =  가랑이
						ENDIF
					ENDIF
				ENDIF
				PRINTFORMW %LASTWORD가()% %CALLNAME:MASTER%의 눈길을 빼앗고 있습니다…
			ELSEIF TALENT:부끄럼쟁이 || RAND:5 == 0
				IF RAND:2 == 0
					PRINTFORMW 긴 옷자락을 치마로 삼기에는 부족한 지, 부끄러운 듯이 다리를 비비 꼬고 있습니다…
				ELSE
					PRINTFORMW 긴 옷자락을 치마로 삼기에는 부족한 지, 밑단을 꼭 잡아서 아래로 늘리고 있습니다…
				ENDIF
			ENDIF
		ENDIF
	ELSEIF CHECK_SHIRT("여교사")
		PRINTFORMW 타이트 스커트의 여교사 차림을 하도록 시켰습니다
	ELSEIF CHECK_SHIRT("일본전통옷")
		PRINTFORMW 기모노 차림을 하도록 시켰습니다
	ELSEIF CHECK_SHIRT("메이드복")
		PRINTFORMW 빳빳하게 풀을 먹인, 청결한 메이드복을 입도록 시켰습니다
	ELSEIF CHECK_SHIRT("체조복")
		PRINTFORMW \@ COND("다리 사용") ? 블루머에서 뻗어나온 다리가  # \@건강해보이는 체조복으로 갈아입게 시켰습니다
	ELSEIF CHECK_SHIRT("간호사복")
		PRINTFORMW 백의의 천사가 되도록 시켰습니다
	ELSEIF CHECK_SHIRT("차이나드레스")
		PRINTFORMW \@ COND("다리 사용") ? 슬릿에서 뻗어나온 다리가 # \@ 요염한 차이나드레스로 갈아입게 시켰습니다
	ELSEIF CHECK_SHIRT("세라복")
		PRINTFORMW 슬쩍 보이는 배꼽이 매력적인 세라복으로 갈아입게 시켰습니다
	ELSEIF CHECK_SHIRT("무녀")
		PRINTFORMW 티끌 없는 청순함이 넘치는 홍백의 무녀복으로 갈아입게 시켰습니다
	ELSEIF CHECK_SHIRT("베이비돌")
		PRINTFORMW 속이 살짝 비치는 사랑스러운 베이비돌로 갈아입게 시켰습니다
	ELSEIF CHECK_SHIRT("웨딩드레스")
		PRINTFORMW 순백의 웨딩드레스로 갈아입게 시켰습니다
		IF TALENT:작은몸집
			PRINTFORMW 조금 발돋움한 느낌도, 귀여움에 한몫하고 있습니다
		ELSEIF TALENT:건방짐
			PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 부끄러움
			SIF TALENT:연모
				PRINT 과 기쁨
			PRINTFORMW 을 감추기 위해서인지, 악담을 하기 시작했습니다…
		ELSEIF (TALENT:솔직 || TALENT:청초) && TALENT:연모
			PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% 배어나오는 기쁨을 숨기지 않고있습니다…
		ENDIF
	ELSEIF CHECK_SHIRT("고스로리드레스")
		PRINTFORMW \@ AGE(TARGET) <= 2 ? 이상하게도 귀여운 # 귀여움과의 갭에 요염한 매력을 느끼는 \@고딕＆로리타옷로 갈아입게 했습니다
	ELSEIF CHECK_SHIRT("치어리더")
		PRINTFORMW 건강한 매력에, 보는 것만으로 힘이 나게 만드는 치어리더옷으로 갈아입혀주었습니다
	ELSEIF CHECK_SHIRT("파자마")
		PRINTFORMW 귀여운 파자마로 갈아입혀주었습니다
	ELSEIF CHECK_SHIRT("웨이트리스")
		PRINTFORMW 다방에 어울리는 제복 모습이 되었습니다
	ELSEIF CHECK_CLO("비키니姿")
		IF TALENT:거유 && RAND:2 == 0
			PRINT 커다란 가슴이 흘러넘칠 듯한 
		ELSE
			PRINT 대담한 
		ENDIF
		PRINTFORMW 비키니 차림을 하도록 시켰습니다
	ELSEIF CHECK_BODYS("학교수영복")
		PRINTFORMW 진한 파랑색의 학교수영복을 입게시켰습니다
	ELSEIF CHECK_BODYS("레오타드") && CHECK_BODYS("Ｖ노출")
		PRINTFORMW 가랑이와 가슴 주변만 노출시킨 레오타드를 입도록 시켰습니다
	ELSEIF CHECK_BODYS("본디지")
		PRINTFORMW \@ PENIS(TARGET) == 0 ? 유방이 훤히 보이고 # \@ 가랑이에 지퍼가 달린 본디지 차림이 되도록 시켰습니다
	ELSEIF CHECK_BODYS("바니슈트")
		PRINTFORMW 어른의 매력이 충만한 바니걸 모습을 하도록 시켰습니다
	ELSEIF CHECK_BODYS("원피스수영복")
		PRINTFORMW 조금 청초한 분위기가 감도는 하얀 원피스수영복을 입게 시켰습니다
	ENDIF
ELSEIF RESULT == 99
	CALL COORDINATE_MUMA, TARGET
	PRINTFORMW %CALLNAME:TARGET% 자신의 의상으로 갈아입게 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

SIF EQUIP:웃옷 == 0 && COND("다리 사용")
	CALL SHOW_PUBICHAIR

@COORDINATE_COS, ARG
;下着以外の플래그消去
CALL SET_SHIRT, TARGET
CALL SET_BODYS, TARGET
CALL SET_OUTER, TARGET
CALL SET_SOCKS, TARGET
CALL SET_SHOES, TARGET
CALL SET_GLOVE, TARGET

SELECTCASE ARG
CASE 0
	CALL SET_SHIRT, TARGET, 100
CASE 1
	CALL SET_SHIRT, TARGET, 101
	CALL SET_OUTER, TARGET, 104
	CALL SET_SHOES, TARGET, 100
CASE 2
	CALL SET_SHIRT, TARGET, 102
	CALL SET_SOCKS, TARGET, 107
	CALL SET_SHOES, TARGET, 107
CASE 3
	CALL SET_SHIRT, TARGET, 103
	CALL SET_SOCKS, TARGET, 106
	CALL SET_SHOES, TARGET, 101
CASE 4
	CALL SET_SHIRT, TARGET, 104
	CALL SET_OUTER, TARGET, 100
	CALL SET_SOCKS, TARGET, 100
	CALL SET_SHOES, TARGET, 109
CASE 5
	CALL SET_SHIRT, TARGET, 105
	CALL SET_SOCKS, TARGET, 105
	CALL SET_SHOES, TARGET, 102
CASE 6
	CALL SET_SHIRT, TARGET, 106
	CALL SET_SHOES, TARGET, 106
CASE 7
	CALL SET_SHIRT, TARGET, 107
	CALL SET_SOCKS, TARGET, 101
	CALL SET_SHOES, TARGET, 101
CASE 8
	CALL SET_SHIRT, TARGET, 108
	CALL SET_SOCKS, TARGET, 107
	CALL SET_SHOES, TARGET, 107
CASE 9
	CALL SET_SHIRT, TARGET, 109
CASE 10
	CALL SET_SHIRT, TARGET, 110
	CALL SET_SOCKS, TARGET, 106
	CALL SET_GLOVE, TARGET, 100
	CALL SET_SHOES, TARGET, 100
CASE 11
	CALL SET_SHIRT, TARGET, 111
	CALL SET_SOCKS, TARGET, 108
	CALL SET_SHOES, TARGET, 101
CASE 12
	CALL SET_SHIRT, TARGET, 112
	CALL SET_SOCKS, TARGET, 100
	CALL SET_SHOES, TARGET, 109
CASE 13
	CALL SET_SHIRT, TARGET, 113
	CALL SET_OUTER, TARGET, 108
CASE 21
	CALL SET_PANTIES, TARGET, 110, 1
	CALL SET_SHOES, TARGET, 102
CASE 22
	CALL SET_BODYS, TARGET, 107
CASE 23
	CALL SET_BODYS, TARGET, 103
	CALL SET_SHOES, TARGET, 105
CASE 24
	CALL SET_BODYS, TARGET, 106
	CALL SET_GLOVE, TARGET, 102
	CALL SET_SHOES, TARGET, 106
CASE 25
	CALL SET_BODYS, TARGET, 104
	CALL SET_SOCKS, TARGET, 105
	CALL SET_SHOES, TARGET, 106
	CALL SET_OTHER, TARGET, 110
	CALL SET_OTHER, TARGET, 131
CASE 26
	CALL SET_BODYS, TARGET, 108
ENDSELECT

@COORDINATE_MUMA, ARG
CALL SETFLAG, "衣装全脱ぎ", ARG
SIF STRLENS(NAME_PANTIES(BASE:ARG:종족, ARG) )
	CALL SET_PANTIES, ARG, BASE:ARG:종족
IF STRLENS(NAME_PANTIES(BASE:ARG:종족, ARG) ) && STRLENS(NAME_BRA(BASE:ARG:종족, ARG) )
	CALL SET_PANTIES, ARG, BASE:ARG:종족, 1
ELSEIF STRLENS(NAME_PANTIES(BASE:ARG:종족, ARG) )
	CALL SET_PANTIES, ARG, BASE:ARG:종족
ELSEIF STRLENS(NAME_BRA(BASE:ARG:종족, ARG) )
	CALL SET_BRA, ARG, BASE:ARG:종족
ENDIF
SIF STRLENS(NAME_SHIRT(BASE:ARG:종족, ARG) )
	CALL SET_SHIRT, ARG, BASE:ARG:종족
SIF STRLENS(NAME_BODYS(BASE:ARG:종족, ARG) )
	CALL SET_BODYS, ARG, BASE:ARG:종족
SIF STRLENS(NAME_OUTER(BASE:ARG:종족, ARG) )
	CALL SET_OUTER, ARG, BASE:ARG:종족
SIF STRLENS(NAME_SOCKS(BASE:ARG:종족, ARG) )
	CALL SET_SOCKS, ARG, BASE:ARG:종족
SIF STRLENS(NAME_SHOES(BASE:ARG:종족, ARG) )
	CALL SET_SHOES, ARG, BASE:ARG:종족
SIF STRLENS(NAME_GLOVE(BASE:ARG:종족, ARG) )
	CALL SET_GLOVE, ARG, BASE:ARG:종족
CALL SET_OTHER, ARG, BASE:ARG:종족


;-------------------------------------------------
;팬티の선택
;-------------------------------------------------
@SELECT_PANTU
#DIM LCOUNT
#DIM MEMO_LINECOUNT
#DIM MEMO_PANTU
#DIM MEMO_BRA

MEMO_LINECOUNT = LINECOUNT

PRINTL 
PRINTFORML （팬티를 입은 상태에서 브래지어를 선택하면, 가능한 같은 색을 선택합니다）
IF EQUIP:팬티+EQUIP:브래지어
	PRINTFORM 착용중：
	IF EQUIP:팬티
		PRINTFORM [%PANTIES(TARGET)%
		IF CHECK_PANTIES("파스너開")
			PRINT (열림)
		ELSEIF CHECK_PANTIES("ＶＡ노출")
			PRINT (구멍뚫림)
		ELSEIF CHECK_PANTIES("Ａ노출")
			PRINT (Ａ구멍뚫림)
		ELSEIF CHECK_PANTIES("Ｖ노출")
			PRINT (Ｖ구멍뚫림)
		ELSEIF CHECK_PANTIES("파스너閉")
			PRINT (닫힘)
		ELSEIF CHECK_PANTIES("슬릿")
			PRINT (슬릿)
		ENDIF
		PRINTFORM ] 
	ELSE
		PRINTFORM [노팬티] 
	ENDIF
	IF EQUIP:브래지어
		PRINTFORML [%BRA(TARGET)%]
	ELSE
		PRINTFORML [노브래지어]
	ENDIF
ENDIF
VARSET LOCAL
FOR LCOUNT, 0, 50
	LOCALS = %NAME_PANTIES(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		SIF LCOUNT <30
			PRINTFORM  [{LCOUNT, 2}] %TEXT_LJ(LOCALS, 30)%
		LOCAL:LCOUNT = 1
	ENDIF
	LOCALS:1 = %NAME_BRA(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS:1)
		SIF LCOUNT < 30
			PRINTFORM  [{LCOUNT+50, 2}] %LOCALS:1%
		LOCAL:(LCOUNT+50) = 1
	ENDIF
	SIF STRLENS(LOCALS) + STRLENS(LOCALS:1) && LCOUNT < 30
		PRINTL 
NEXT

;Ｈ한속옷([80]も常に直接선택は가능)
IF COND("다리 사용")
	PRINTFORML  [30] %TEXT_LJ("Ｈ한속옷세트(랜덤)를 입게한다", 30)%
	LOCAL:30 = 1
ELSE
	PRINTFORML  [80] %TEXT_LJ("Ｈ한브래지어(랜덤)를 입게한다", 30)%
	LOCAL:80 = 1
ENDIF

PRINTFORML  [90] \@ CONFIG("팬티と브래지어を合わせる") ? ○ # － \@브래지어를 팬티에 맞춘다
LOCAL:90 = 1

;名前に色や縞々とあるもの以外なら色合いの変更を認める
;IF EQUIP:팬티 && SUBSTRING(CSTR:40, 0, 2) == SUBSTRING(TEXTS("衣装の色", EQUIP:팬티), 0, 2)
;ELSEIF EQUIP:브래지어 && SUBSTRING(CSTR:41, 0, 2) == SUBSTRING(TEXTS("衣装の色", EQUIP:브래지어), 0, 2)
;ELSEIF EQUIP:팬티 + EQUIP:브래지어
;	PRINTFORM  [95] \@ CHECK_CLO("수영복차림") ? 수영복 # 下着 \@の色等を変更する
	LOCAL:95 = 1
;	PRINTL 
;ENDIF
IF EQUIP:팬티 || EQUIP:브래지어
	IF EQUIP:팬티
		PRINTFORM  [96] %TEXT_LJ("팬티를 벗게한다", 30)%
		LOCAL:96 = 1
	ENDIF
	IF EQUIP:브래지어
		PRINTFORM  [97] 브래지어를 벗게한다
		LOCAL:97 = 1
	ENDIF
	PRINTL 
ENDIF
IF EQUIP:팬티 && EQUIP:브래지어
	PRINTFORML  [98] 위아래 모두 벗게한다
	LOCAL:98 = 1
ENDIF
LOCALS = %NAME_PANTIES(BASE:종족, TARGET)%
LOCALS:1 = %NAME_BRA(BASE:종족, TARGET)%
IF STRLENS(LOCALS) || STRLENS(LOCALS:1)
	IF STRLENS(LOCALS)
		PRINTFORM  [99] %TEXT_LJ(LOCALS, 30)%
		LOCAL:99 = 1
	ENDIF
	IF STRLENS(LOCALS:1)
		PRINTFORM [149] %LOCALS:1%
		LOCAL:149 = 1
	ENDIF
	PRINTL 
ENDIF
PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

MEMO_PANTU = EQUIP:팬티
MEMO_BRA = EQUIP:브래지어

IF RESULT == 100
	RETURN 0
ELSEIF RESULT == 30 && LOCAL:RESULT
	CALL SET_PANTIES, TARGET, 130, 1
	PRINTFORM 에로틱한 
	IF CHECK_PANTIES("시스루")
		PRINTFORM 시스루 소재의 
	ELSEIF CHECK_PANTIES("레이스")
		PRINTFORM 레이스로 장식된 
	ELSEIF CHECK_PANTIES("실크")
		PRINTFORM 실크로 된 
	ENDIF
	;マイクロ（Ｔ백でもある）
	IF CHECK_PANTIES("마이크로")
		PRINTFORM 옷감 면적이 이상할정도로 적은 
	ELSEIF CHECK_PANTIES("파스너")
		PRINTFORM 가랑이 부분에 지퍼가 달린 
	ELSEIF CHECK_PANTIES("Ｖ노출")
		PRINTFORM 가랑이 부분에 천이 없는 
	ELSEIF CHECK_PANTIES("Ａ노출")
		PRINTFORM 엉덩이 구멍 주변에 천이 없는 
	ENDIF
	;紐
	IF CHECK_PANTIES("끈")
		LASTWORD = 끈팬티
	;Tバック
	ELSEIF CHECK_PANTIES("Ｔ백")
		LASTWORD = Ｔ백
	;ローorハイ
	ELSEIF CHECK_PANTIES("로우레그")
		LASTWORD = 로우레그 속옷
	ELSEIF CHECK_PANTIES("하이레그")
		LASTWORD = 하이레그 속옷
	ELSE
		LASTWORD = 속옷
	ENDIF
	PRINTFORMW %LASTWORD를()% 입도록 시켰습니다. 
	IF EQUIP:브래지어
		PRINTFORM 브래지어는 같은 색과 소재로 만들어진
		IF CHECK_BRA("オープン브래지어")
			PRINTFORM , 유두 주변을 완전히 가리지 못하는  
		ELSEIF CHECK_BRA("1/4컵")
			PRINTFORM , 유방 아래까지 밖에 없고 가슴이 죄다 보이는 
		ELSEIF CHECK_BRA("마이크로")
			PRINTFORM , \@CHECK_PANTIES("마이크로") ? 역시 # \@ 피복면적이 비정상적으로 적은 
		ELSEIF CHECK_BRA("1/2컵")
			PRINTFORM , 유륜이 절반정도 보이는 
		ENDIF
		PRINTFORMW 물건입니다…
	ENDIF
ELSEIF RESULT == 80 && LOCAL:RESULT
	CALL SET_BRA, TARGET, 130
	PRINTFORM 에로틱한 
	IF CHECK_BRA("시스루")
		PRINTFORM 시스루 소재의 
	ELSEIF CHECK_BRA("레이스")
		PRINTFORM 레이스로 장식된 
	ELSEIF CHECK_BRA("실크")
		PRINTFORM 실크로 된 
	ENDIF
	IF CHECK_BRA("オープン브래지어")
		PRINTFORM 유두 주변을 완전히 가리지 못하는 브래지어(？)
	ELSEIF CHECK_BRA("1/4컵")
		PRINTFORM 유방을 의 아래까지 밖에 없고 가슴이 죄다 보이는 브래지어(？)
	ELSEIF CHECK_BRA("마이크로")
		PRINTFORM 피복면적이 비정상적으로 적은 브래지어
	ELSEIF CHECK_BRA("1/2컵")
		PRINTFORM 유방의 상반구가 반 보이고 있는 브래지어
	ELSE
		PRINTFORM 브래지어
	ENDIF
	PRINTFORMW 를 입게 했습니다. 
ELSEIF RESULT >= 0 && RESULT < 50 && LOCAL:RESULT
	LOCAL = RESULT + 100

	CALL SET_PANTIES, TARGET, LOCAL

	SELECTCASE LOCAL
	CASE 100
		IF RAND:2 == 0
			PRINTFORMW 몸의 라인을 살짝 보여주는 줄무늬 속옷을 입도록 시켰습니다
		ELSE
			PRINTFORMW 사타구니의 음영이 부드럽게 드러내는 줄무니 팬티를  입도록 시켰습니다
		ENDIF
	CASE 101
		IF RAND:2 == 0
			PRINTFORMW 섹시한 검은 레이스 천으로 만든 속옷을 입도록 시켰습니다
		ELSE
			PRINTFORMW 어른의 향기가 풍기는 검은 레이스 팬티를 입게 했습니다
		ENDIF
	CASE 102
		IF RAND:2 == 0
			PRINTFORMW 귀여운 프릴로 장식된 속옷을 입도록 시켰습니다
		ELSE
			PRINTFORMW 청초한 프릴이 달린 팬티를 입도록 시켰습니다
		ENDIF
	CASE 103
		PRINTFORMW 벗기 쉬워보이는 끈팬티를 입도록 시켰습니다
	CASE 104
		PRINTFORMW 엉덩이의 라인이 사랑스러운 Ｔ백을 입도록 시켰습니다
	CASE 105
		PRINTFORMW 가랑이 위쪽이 얕은 고무끈달린 로우라이즈를 입도록 시켰습니다
	CASE 106
		IF RAND:2 == 0
			PRINTFORMW 대담하게 벌어져 있는 속옷을 입도록 시켰습니다
		ELSE
			PRINTFORMW 굉장히 음란한 시스루 팬티를 입도록 시켰습니다
		ENDIF
	CASE 107
		PRINTFORMW \@ PENIS(TARGET) ? 억눌린 페니스가 자기주장을 하는 # 부드러운 치구를 두드러지게하는 \@ 하이레그팬티를 입도록 시켰습니다
	CASE 108
		PRINTFORMW 가랑이에 지퍼가 달린, 아슬아슬한 가죽 하이레그 팬티를 입도록 시켰습니다
	CASE 109
		LOCALS = 
		SELECTCASE COND("음모")
		CASE 1, 2
			LOCALS = 벗겨낸 삶을 달걀같은 둔덕
		CASE 3
			LOCALS = 맨들맨들한 둔덕
		CASE 4
			IF CONDS("음모") == "剃り跡"
				LOCALS = 까슬까슬한 면도자국
			ELSE
				LOCALS = 갓 자란 음모
			ENDIF
		CASE 5
			IF CSTR:71 != "" && RAND:2
				LOCALS = %조사처리(CSTR:71,"로")% 정리된 음모
			ELSE
				LOCALS = 잘 손질된 음모
			ENDIF
		CASE IS >= 6
			LOCALS = 음모의 수풀
		ENDSELECT
		IF LOCALS != "" && PENIS(TARGET) == 0
			IF RAND:3 == 0
				LOCALS = %조사처리(LOCALS,"를")% 과시하는 듯한 디자인의 
			ELSEIF RAND:2
				IF AGE(TARGET) >= 3
					LOCALS = %조사처리(LOCALS,"는")% 물론, 그뿐만 아니라 클리토리스의 콩알이 보이고 있는
				ELSE
					LOCALS = %조사처리(LOCALS,"는")% 물론, 그뿐만 아니라 균열의 윗부분이 보이고 있는
				ENDIF
			ELSE
				LOCALS = %LOCALS%\@ ABL:노출벽 >= 3 ? %조사만처리(LOCALS, "를")% 과시하는 데 최적인 모습인 # %조사만처리(LOCALS, "가")% 잘 보이는  \@ 
			ENDIF
		ELSE
			LOCALS = 가랑이 윗부분이 이상하게 얕은 
		ENDIF
		PRINTFORMW %LOCALS% 로우레그팬티를 입도록 시켰습니다
	CASE 110
		PRINTFORMW 대담한 비키니를 입도록 시켰습니다
	CASE 111
		PRINTFORMW 소중한 부분을 전혀 가리지 않는 아주 작은 면적의 수영복을 입도록 시켰습니다
	CASE 112
		IF RAND:2 == 0
			PRINTFORMW 품위있고 세련된 레이스 속옷을 입도록 시켰습니다
		ELSE
			PRINTFORMW 어른 같으면서도 귀여운 레이스팬티를 입도록 시켰습니다
		ENDIF
	CASE 113
		PRINTFORMW 작은 옷감과 형용하는 것이 좋은 것 같은, 굉장히 아슬아슬한 팬티를 입게 했습니다
	CASE 114
		PRINTFORML …어차피라면, 더욱 에로틱한 것을 선택합니까？
		PRINTFORML [ 0] 시스루! 
		PRINTFORML [ 1] 구멍 열림! 
		PRINTFORML [ 2] 아니, 별로 보통옷이 좋다
		CALL INPUT_SELECT, 3
		PRINTFORMW 팬티라고 말해도 좋은 지 망설이게 하는 물건, Ｃ스트링를 입게 했습니다
		IF RESULT == 0
			CSTR:40 = 透けＣスト
			CALL CALC, "팬티플래그추가", SETFLAG_PANTIES("시스루")
			PRINTFORMW 옷감이 보일듯 말듯인 것으로, 모양 너머로%CALLNAME:TARGET%의 소중한 부분이 보여 매우 선정적입니다
		ELSEIF RESULT == 1
			CALL CALC, "팬티플래그추가", SETFLAG_PANTIES("Ｖ노출")
			PRINTFORMW 구멍이 열려 있는 덕분에, 속옷이라고 하는 것보다도 성기가 여기에 있다고 강조하기 위한 물건의 같습니다
		ENDIF
	CASE 120
		IF PENIS(TARGET)
			PRINTFORMW \@ TALENT:남자 ? # 남성용 \@%조사처리(PANTIES(TARGET),"를")% 입도록 시켰습니다 
		ELSE
			PRINTFORMW 보이시한 귀여움이 넘치는 복서팬티를 입도록 시켰습니다
		ENDIF
	CASE 121, 122
		PRINTFORMW \@ TALENT:남자 ? # 남성용  \@%조사처리(PANTIES(TARGET),"를")% 입게 했습니다
	CASEELSE
		PRINTFORMW %조사처리(PANTIES(TARGET),"를")% 입게했습니다
	ENDSELECT

	;브래지어も合わせる？
	;SELECTCASE LOCAL
	;CASE 100 TO 119
		SIF CONFIG("팬티と브래지어を合わせる")
			CALL SET_BRA, TARGET, LOCAL
	;ENDSELECT
ELSEIF RESULT >= 50 && RESULT <= 80 && LOCAL:RESULT
	LOCAL = RESULT + 50
	CALL SET_BRA, TARGET, LOCAL
	SELECTCASE LOCAL
	CASE 100
		PRINTFORMW 가슴의 라인을 살짝 주장하는 줄무늬 브라를 입도록 시켰습니다
	CASE 101
		PRINTFORMW 섹시한 레이스천으로 만든 브라를 입도록 시켰습니다
	CASE 102
		PRINTFORMW 귀여운 프릴로 장식된 브라를 입도록 시켰습니다
	CASE 103
		PRINTFORMW 사랑스러운 캐미솔을 입도록 시켰습니다
	CASE 104
		PRINTFORMW 컵이 하반신 밖에 없는 브래지어를 입게 했습니다
	CASE 105
		PRINTFORMW 활동적인 탱크탑을 입도록 시켰습니다
	CASE 106
		PRINTFORMW 옷감의 대부분이 비치고 있는 브래지어를 입게 했습니다
	CASE 107
		PRINTFORMW \@ TALENT:남자 ? 위의 ４분의 1이 노출되어있는  # 가슴계곡이 강조되는  \@ 브래지어를 입도록 시켰습니다
	CASE 108
		PRINTFORMW 도칙적인 분위기를 풍기는, 가죽 브라를 입도록 시켰습니다
	CASE 109
		PRINTFORMW 딱 달라붙게 가슴을 가려주는 튜브탑을 입도록 시켰습니다
	CASE 110
		PRINTFORMW 대담한 비키니타입의 브래지어를 입게 했습니다
	CASE 111
		PRINTFORMW 소중한 곳을 전혀 숨길 수 있지 않은 극소 옷감의 수영복을 입게 했습니다
	CASE 112
		PRINTFORMW 품위 있는 레이스 옷감의 브래지어를 입게 했습니다
	CASE 113
		PRINTFORMW 작은 옷감과 형용하는 것이 좋은 것 같은, 아슬아슬한 브래지어를 입게 했습니다
	CASEELSE
		PRINTFORMW %조사처리(BRA(TARGET),"를")% 입도록 시켰습니다
	ENDSELECT
ELSEIF RESULT == 90 && LOCAL:RESULT
	INVERTBIT FLAG:204, 3
	CLEARLINE LINECOUNT - MEMO_LINECOUNT
ELSEIF RESULT == 95 && LOCAL:RESULT
	PRINTFORML 어느 색으로 합니까? 
	PRINTFORML  [ 0] 흰색
	PRINTFORML  [ 1] 순백
	PRINTFORML  [ 2] 검은색
	PRINTFORML  [ 3] 빨간색
	PRINTFORML  [ 4] 분홍
	PRINTFORML  [ 5] 진홍
	PRINTFORML  [ 6] 녹색
	PRINTFORML  [ 7] 라이트그린
	PRINTFORML  [ 8] 노란색
	PRINTFORML  [ 9] 주황색
	PRINTFORML  [10] 파란색
	PRINTFORML  [11] 라이트블루
	PRINTFORML  [12] 감색
	PRINTFORML  [13] 보라색
	PRINTFORML  [14] 줄무늬(청＆백)
	PRINTFORML  [15] 줄무늬(황＆백)
	PRINTFORML  [16] 줄무늬(녹＆백)
	PRINTFORML  [17] 줄무늬(적＆백)
	PRINTFORML  [18] 줄무늬(흑＆백)
	PRINTFORML [100] 변경하지 않는다
	CALL INPUT_SELECT, 19, 100
	LOCAL = RESULT
	SELECTCASE RESULT
	CASE 100
	CASEELSE
		SELECTCASE RESULT
		CASE 0
			LOCAL = SETFLAG_COMMON("하양")
		CASE 1
			LOCAL = SETFLAG_COMMON("순백")
		CASE 2
			LOCAL = SETFLAG_COMMON("검정")
		CASE 3
			LOCAL = SETFLAG_COMMON("빨강")
		CASE 4
			LOCAL = SETFLAG_COMMON("연분홍")
		CASE 5
			LOCAL = SETFLAG_COMMON("진홍")
		CASE 6
			LOCAL = SETFLAG_COMMON("초록")
		CASE 7
			LOCAL = SETFLAG_COMMON("연록")
		CASE 8
			LOCAL = SETFLAG_COMMON("노랑")
		CASE 9
			LOCAL = SETFLAG_COMMON("주황")
		CASE 10
			LOCAL = SETFLAG_COMMON("파랑")
		CASE 11
			LOCAL = SETFLAG_COMMON("연파랑")
		CASE 12
			LOCAL = SETFLAG_COMMON("감색")
		CASE 13
			LOCAL = SETFLAG_COMMON("보라")
		CASE 14
			LOCAL = SETFLAG_COMMON("줄무늬", "파랑")
		CASE 15
			LOCAL = SETFLAG_COMMON("줄무늬", "노랑")
		CASE 16
			LOCAL = SETFLAG_COMMON("줄무늬", "초록")
		CASE 17
			LOCAL = SETFLAG_COMMON("줄무늬", "빨강")
		CASE 18
			LOCAL = SETFLAG_COMMON("줄무늬", "검정")
		ENDSELECT
		IF EQUIP:팬티
			EQUIP:팬티 = CLEARBITS(EQUIP:팬티, 53, 59)
			EQUIP:팬티 |= LOCAL
		ENDIF
		IF EQUIP:브래지어
			EQUIP:브래지어 = CLEARBITS(EQUIP:브래지어, 53, 59)
			EQUIP:브래지어 |= LOCAL
		ENDIF
	ENDSELECT
	RESTART
ELSEIF RESULT == 96 && LOCAL:RESULT
	CALL EVENT_DATUI_PANTU, "팬티"
ELSEIF RESULT == 97 && LOCAL:RESULT
	CALL EVENT_DATUI_PANTU, "브래지어"
ELSEIF RESULT == 98 && LOCAL:RESULT
	CALL EVENT_DATUI_PANTU, "上下"
ELSEIF RESULT == 99 && LOCAL:RESULT
	CALL SET_PANTIES, TARGET, BASE:종족
	PRINTFORMW %조사처리(PANTIES(TARGET),"를")% 입도록 시켰습니다
ELSEIF RESULT == 149 && LOCAL:RESULT
	CALL SET_BRA, TARGET, BASE:종족
	PRINTFORMW %조사처리(BRA(TARGET),"를")% 입도록 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

;구속などされていたり, 팬티はいてないならここまで
SIF TEQUIP:아이마스크 || TEQUIP:구속 || TEQUIP:재갈 || TEQUIP:관내노출플레이 || TEQUIP:야외플레이
	RESTART
SIF MEMO_PANTU == EQUIP:팬티 && MEMO_BRA == EQUIP:브래지어
	RESTART

;스커트 かつ 구속などされてない かつ 양기or연모or소악마 かつ 反発0LV
IF EQUIP:스커트 && EQUIP:팬티 && MEMO_PANTU != EQUIP:팬티 && TALENT:양기 + TALENT:연모 + TALENT:소악마 && MARK:반발각인 == 0 && CHECK_PANTIES("男物") == 0 && RAND:3 == 0
	PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 
	;음란or욕정1000이상
	IF (TALENT:음란 && PALAM:욕정 >= 1000) && RAND:4
		PRINT 요염하게 미소지으면서 
	ELSEIF RAND:3 == 0
		SIF RAND:2 == 0
			PRINT 즐거운듯이 
		PRINT 미소지으면서 
	;プライド高いor음란or새드
	ELSEIF TALENT:교만 + TALENT:음란 + TALENT:새드 && RAND:2 == 0
		PRINT 겁없는 미소를 지으면서 
	;소악마
	ELSEIF TALENT:소악마 && RAND:2 == 0
		PRINT 히죽히죽 거리면서 
	ELSEIF TALENT:부끄럼쟁이
		PRINT 뺨을 붉히면서 
	ENDIF
	IF TALENT:호색 + TALENT:음란 && RAND:2 == 0
		PRINT 대담하게 
	ELSEIF RAND:3
		PRINT 천천히 
	ENDIF
	PRINTFORM %조사처리(SKIRT(TARGET, 1),"를")% 걷어올리고, 
	IF CHECK_CLO("수영복차림")
		PRINT 수영복
	ELSE
		SIF PALAM:Ｖ윤 >= 3000 && PENIS(TARGET) == 0 && RAND:2 == 0
			PRINT 촉촉하게 땀에 젖은 
		PRINT 팬티
	ENDIF
	PRINTW  의 차림새를 과시했다…
ENDIF

;ぱんつを履き替えた
IF EQUIP:팬티 && MEMO_PANTU != EQUIP:팬티 && COND("다리 사용") && PENIS(TARGET) == 0 && RANDIF(1, EQUIP:브래지어 && MEMO_BRA != EQUIP:브래지어)
	CALL SHOW_PUBICHAIR
;브래지어を着けかえた
ELSEIF EQUIP:브래지어 && MEMO_BRA != EQUIP:브래지어
	CALL SHOW_NYUURIN
ENDIF

RESTART

;브래지어着用後の詳細描写。主に形状と材質で言及
@SHOW_NYUURIN
IF CHECK_BRA("オープン브래지어") || CHECK_BRA("1/4컵") || CHECK_BRA("1/2컵") || CHECK_BRA("시스루")
	IF CHECK_BRA("시스루")
		PRINTFORM %TEXTR("천지에 비쳐 보이는", "희미하게 비치는", "얇은 옷감 너머로 비치는")%
	ELSE
		PRINTFORM %TEXTR("훤히 보이는", "강력하게 주장하는", "부끄러운 기색도 없이 나타나 있는")%
	ENDIF
	IF CALCF("Ｂ발정")
		IF COND("유두비대") && RANDIF(1, TALENT:니플피어스)
			IF COND("유두비대") >= 2
				PRINTFORM 비대해진
			ELSE
				PRINTFORM 큰
			ENDIF
		ELSEIF TALENT:니플피어스
			PRINTFORM 피어스로 장식해진
		ENDIF
	ELSE
		PRINTFORM 함몰
	ENDIF
	PRINTFORM 유두와
	SELECTCASE COND("거유륜")
	CASE IS >= 2
		PRINTFORM 거대한
	CASE 1
		PRINTFORM 큰
	ENDSELECT
	PRINTFORMW 유륜이 정말 %TEXTR("음탕합니다", "흥분되게 합니다", "멋집니다")%…
ELSEIF CHECK_BRA("마이크로")
	IF CALCF("Ｂ발정") && COND("유두비대") && RANDIF(1, COND("거유륜") )
		PRINTFORMW 밀착도가 높은 옷감때문에, 아래에서 세워진 유두의 크기를 숨길 수가 없기는 커녕 반대로 강조되어 버리고 있습니다…
	ELSEIF COND("거유륜")
		PRINTFORM 유두는 겨우 숨기고 있지만,
		SELECTCASE COND("거유륜")
		CASE IS >= 2
			PRINTFORM 부끄러울만큼 큰
		CASE 1
			PRINTFORM 평균보다 꽤 큰
		ENDSELECT
		PRINTFORMW 유륜은 그 대부분을 쬐어 버리고 있습니다…
	ENDIF
ENDIF

;途中
@SHOW_PUBICHAIR
;보지穴開きでの分岐はとりあえず無し
;生え放題
SELECTCASE COND("음모")
CASE 7
	IF CHECK_CLO("食い込み") || CHECK_CLO("팬티노출") == 0
		IF RAND:3 == 0
			;マイクロ
			IF CHECK_CLO("팬티노출") && RAND:2
				IF CHECK_PANTIES("마이크로")
					PRINTW 사타구니의 작은 천의 모든 방향에서는, 성대하게 음모가 삐져나와있습니다…
				ELSE
					PRINTW 작은 천에서는, 상당히 음모가 불거져나와있습니다…
				ENDIF
			ELSEIF RAND:2 == 0
				PRINTW 가랑이에 먹혀든 가늘은 옷감의 옆으로, 성대하게 음모가 삐져나와있습니다…
			ELSE
				PRINTW 격렬하게 치켜올라간 가랑이의 옆으로, 성대하게 음모가 삐져나와있습니다…
			ENDIF
		ELSEIF RAND:3 == 0
			PRINTW 비져나온 음모가 굉장히 흥분을 불러일으킨다…
		ELSEIF RAND:2 == 0
			PRINTW 정리되지 않은 음모가 비어져 나온 것이 정말로 음란하다
		ELSE
			PRINTW 정리되지 않아서, 음모가 상당히 불거져있습니다…
		ENDIF
	ELSEIF CHECK_CLO("팬티노출") == 0
	ELSEIF CHECK_PANTIES("시스루")
		PRINTW 희미하게 비쳐보이는 강모가 정말로 흥분을 불러일으킨다…
	ELSEIF CHECK_PANTIES("로우라이즈") && CSTR:40 != "로우레그"
		PRINTW 팬티의 위쪽으로, 정리되지 않은 강모가 보이고 있습니다…
	ENDIF
;ナチュラル
CASE 6
	IF CHECK_CLO("食い込み") || CHECK_CLO("팬티노출") == 0
		IF RAND:3 == 0
			IF CHECK_CLO("팬티노출") && RAND:2
				IF CHECK_PANTIES("마이크로")
					PRINTW 사타구니의 작은 옷감에서, 상당히 음모가 비져나와 있습니다…
				ELSE
					PRINTW 작은 천에서는, 단정치 못하게 음모가 비져나와 있습니다…
				ENDIF
			ELSEIF RAND:2 == 0
				PRINTW 가랑이에 먹혀든 천의 옆으로, 음모가 살짝 비져나와 있습니다…
			ELSE
				PRINTW 격렬하게 치켜올라간 가랑이의 옆으로, 음모가 살짝 비져나와 있습니다…
			ENDIF
		ELSEIF RAND:3 == 0
			PRINTW 단정치 못하게 비져나온 음모가 정말로 흥분을 불러일으킨다…
		ELSEIF RAND:2 == 0
			PRINTW 정리되지 않은 음모가 비어져 나온 것이 정말로 음란하다
		ELSE
			PRINTW 정리되지 않아서, 음모가 보이고 있습니다…
		ENDIF
	ELSEIF CHECK_CLO("팬티노출") == 0
	ELSEIF CHECK_PANTIES("시스루")
		PRINTW 희미하게 비쳐보이는 부드러운 털이 정말로 흥분을 불러일으킵니다…
	ELSEIF CHECK_PANTIES("로우라이즈") && CSTR:40 != "로우레그"
		PRINTW 팬티의 위쪽으로, 부드러운 털이 보이고 있습니다…
	ENDIF
;お손入れ済み
CASE 5
	IF CHECK_CLO("팬티노출") == 0
	ELSEIF CHECK_CLO("食い込み") 
		IF CHECK_PANTIES("로우레그")
			PRINTW 팬티의 위쪽으로, 음모뿐만 아니라, 세로 틈이 보이고 있습니다…
		ELSE
			PRINTW 사타구니의 작은 옷감에서, 음모가 슬며시 보이고 있습니다…
		ENDIF
	ELSEIF CHECK_PANTIES("시스루")
		PRINTW 희미하게 비쳐보이는 부드러운 털이 정말로 흥분을 불러일으킵니다…
	ELSEIF CHECK_PANTIES("로우레그") && CSTR:40 != "로우레그"
		PRINTW 팬티의 위쪽으로, 손질된 음모가 보이고 있습니다…
	ENDIF
;生えかけ
CASE 4
	IF CHECK_CLO("팬티노출") == 0
	ELSEIF CHECK_CLO("食い込み")
		IF CHECK_PANTIES("로우레그")
			PRINTW 팬티의 위쪽으로, 세로 틈이 보이고 있습니다…
		ELSE
			PRINTW 사타구니의 작은 옷감에서, 음모가 슬며시 보이고 있습니다…
		ENDIF
	ELSEIF CHECK_PANTIES("시스루")
		PRINTW 희미하게 비쳐보이는 부드러운 털이 정말로 흥분을 불러일으킵니다…
	ELSEIF CHECK_PANTIES("로우레그") && CSTR:40 != "로우레그"
		PRINTW 팬티의 위쪽으로, 부드러워 보이는 언덕이 보이고 있습니다…
	ENDIF
;無毛
CASE 1 TO 3
	IF CHECK_CLO("팬티노출") == 0
	ELSEIF CHECK_PANTIES("마이크로")
		PRINTW 음모가 전혀 나지 않아서, 조금 비껴진 것만으로도 음순이 보일 것 같습니다…
	ELSEIF CHECK_PANTIES("시스루")
		PRINTW 슬며시 비치는 가랑이의 세로금이, 굉장히 매력적입니다…
	ELSEIF CHECK_PANTIES("로우레그") && CSTR:40 != "로우레그"
		PRINTW 팬티의 위쪽에서는, 부드러워보이는 언덕이 보이고 있습니다…
	ENDIF
ENDSELECT

@RAND_PANTU, ARG
;팬티の着用禁止
IF COND("身嗜み：노팬티", ARG)
	CALL SET_PANTIES, ARG
	RETURN 0
ENDIF

;남자は今のところ変えない
SIF TALENT:ARG:남자 && COND("오토코노코", ARG) == 0
	RETURN 0
;라미아, 머메이드は팬티はけない
SIF COND("다리が無い", ARG)
	RETURN 0
;겉옷などがＶorＡ穴開きなら팬티ははかない
IF EQUIP:ARG:보디슈츠 && (CHECK_BODYS("Ｖ노출", ARG) || CHECK_BODYS("Ａ노출", ARG) )
	CALL SET_PANTIES, ARG
	RETURN 0
ELSEIF EQUIP:ARG:겉옷 && (CHECK_OUTER("Ｖ노출", ARG) || CHECK_OUTER("Ａ노출", ARG) )
	CALL SET_PANTIES, ARG
	RETURN 0
ENDIF
;보디슈츠を着ているor自分では脱がないor수영복
SIF EQUIP:ARG:보디슈츠 || CHECK_PANTIES("수영복", ARG) || CHECK_PANTIES("탈의불가", ARG)
	RETURN 0
;팬티が変わっていると微妙なものは変えない
SIF CHECK_PANTIES("훈도시", ARG)
	RETURN 0

;勝負下着は勝負しっぱなし
IF CHECK_PANTIES("超Ｈ", ARG)
	CALL SET_PANTIES, ARG, 130, 1
	RETURN 0
ENDIF

;겉옷が하이레그
IF EQUIP:ARG:겉옷 && CHECK_OUTER("하이레그", ARG)
	IF RAND:5 || ABL:ARG:노출벽 < 3
		CALL SET_PANTIES, ARG, 107, 1
	ELSE
		CALL SET_PANTIES, ARG
	ENDIF
ELSE
	LOCAL = SET_RAND_PANTU(ARG)
	IF LOCAL
		CALL SET_PANTIES, ARG, LOCAL, 1
	ELSE
		CALL SET_PANTIES, ARG
	ENDIF
ENDIF

@SET_RAND_PANTU(ARG)
#FUNCTION
;노팬티
SIF RAND:10 == 0 && ABL:ARG:노출벽 >= 3
	RETURNF 0
;몽마自身の팬티を（あれば）穿くことも. 
SIF STRLENS(NAME_PANTIES(BASE:ARG:종족, ARG)) && RAND:3 == 0
	RETURNF BASE:ARG:종족
SIF TALENT:ARG:호색 + TALENT:ARG:음란 && ABL:ARG:노출벽 >= 3 && RAND:5 == 0
	RETURNF 130

SELECTCASE AGE(ARG)
;おとな
CASE 4
	IF RAND:8 == 0
		LOCAL = 113
	ELSEIF RAND:7 == 0
		LOCAL = 112
	ELSEIF RAND:6 == 0
		LOCAL = 107
	ELSEIF RAND:5 == 0
		LOCAL = 106
	ELSEIF RAND:4 == 0
		LOCAL = 104
	ELSEIF RAND:3 == 0
		LOCAL = 103
	ELSEIF RAND:2
		LOCAL = 102
	ELSE
		LOCAL = 101
	ENDIF

;언니
CASE 3
	IF RAND:7 == 0
		LOCAL = 113
	ELSEIF RAND:6 == 0
		LOCAL = 112
	ELSEIF RAND:5 == 0
		LOCAL = 107
	ELSEIF RAND:4 == 0
		LOCAL = 106
	ELSEIF RAND:3 == 0
		LOCAL = 104
	ELSEIF RAND:2
		LOCAL = 103
	ELSE
		LOCAL = 102
	ENDIF
;소녀이하
CASEELSE
	IF RAND:4 == 0
		LOCAL = 109
	ELSEIF RAND:3 == 0
		LOCAL = 105
	ELSEIF RAND:2
		LOCAL = 102
	ELSE
		LOCAL = 100
	ENDIF
ENDSELECT
RETURNF LOCAL

;-------------------------------------------------
;옷に関する関数
;-------------------------------------------------
@SELECT_SHIRT
#DIM LCOUNT
PRINTL 
SIF EQUIP:웃옷
	PRINTFORML 현재:[%SHIRT(TARGET)%\@ CHECK_SHIRT("스커트着用") && EQUIP:스커트 == 0 ? (스커트없음) # \@]
VARSET LOCAL
FOR LCOUNT, 0, 20
	LOCALS = %NAME_SHIRT(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
IF EQUIP:스커트 && !CHECK_SKIRT("원피스")
	PRINTFORML  [97] 스커트만 벗도록 시킨다
	LOCAL:97 = 1
ENDIF
IF EQUIP:웃옷 + EQUIP:스커트
	PRINTFORML  [98] 벗도록 시킨다
	LOCAL:98 = 1
ENDIF
IF STRLENS(NAME_SHIRT(BASE:종족, TARGET))
	PRINTFORML  [99] %NAME_SHIRT(BASE:종족, TARGET)%
	LOCAL:99 = 1
ENDIF
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 20 && LOCAL:RESULT
	CALL SET_SHIRT, TARGET, RESULT+100
	SELECTCASE SHIRT(TARGET)
	CASE "여교사"
		PRINTFORMW 타이트 스커트의 여교사 차림을 하도록 시켰습니다
	CASE "일본전통옷"
		PRINTFORMW 기모노 차림을 하도록 시켰습니다
	CASE "메이드복"
		PRINTFORML 어떤 메이드복으로 합니까？
		PRINTFORML  [ 0] 청초하고 노출이 적은 롱스커트 타입
		PRINTFORML  [ 1] 역시 미니스커트가 최고다
		PRINTFORML  [ 2] 이게 정말로 메이드？ 프렌치메이드 스타일

		CALL INPUT_SELECT, 3

		SELECTCASE RESULT
		CASE 0
			PRINTFORMW 빳빳하게 풀을 먹인, 청결한 메이드복을 입도록 시켰습니다
		CASE 1
			PRINTFORMW 절반까지 노출된 허벅지가 눈부신, 미니스커트 형의 메이드복을 입도록 시켰습니다

			CSTR:42 = 미니스커트메이드
			EQUIP:스커트 = SETFLAG_SKIRT("미니", "에이프런", "프릴")
		CASE 2
			PRINTFORMW 민소매와 초미니스커트를 조합한, 선정적인 메이드복을 입도록 시켰습니다

			CSTR:42 = 프렌치메이드
			EQUIP:웃옷 = SETFLAG_SHIRT("스커트着用", "ズリ불가", "겨드랑이노출", "메이드복", "프릴")
			EQUIP:스커트 = SETFLAG_SKIRT("초미니", "에이프런", "프릴")
		ENDSELECT
	CASE "체조복"
		PRINTFORMW \@ COND("다리 사용") ? 블루머에서 뻗어나온 다리가 # \@건강해보이는 체조복으로 갈아입게 시켰습니다
	CASE "간호사복"
		PRINTFORMW 백의의 천사가 되도록 시켰습니다
	CASE "차이나드레스"
		PRINTFORMW \@ COND("다리 사용") ? 슬릿에서 뻗어나온 다리가 # \@요염한 차이나드레스로 갈아입게 시켰습니다
	CASE "세라복"
		PRINTFORMW 슬쩍 보이는 배꼽이 매력적인 세라복으로 갈아입게 시켰습니다
	CASE "무녀복"
		PRINTFORML …어떠한 무녀복로 합니까？
		PRINTFORML  [ 0] 전통의 무녀복
		PRINTFORML  [ 1] 역시 미니스커트가 최고다
		PRINTFORML  [ 2] 이것은 정말로 무녀？%TEXTS("겨드랑이")%보이는 스타일

		CALL INPUT_SELECT, 3

		SELECTCASE RESULT
		CASE 0
			PRINTFORMW 더러운 곳이 없는 청순함 흘러 넘치는 빨강과 흰색의 무녀복로 갈아입게 했습니다
		CASE 1
			PRINTFORMW 반까지 노출한 허벅지가 눈에 눈부신 미니스커트형태의 무녀복을 입게 했습니다

			CSTR:42 = 미니스커트巫女
			EQUIP:웃옷 = SETFLAG_SHIRT("스커트着用", "ズリ불가", "무녀복", "순백")
			EQUIP:스커트 = SETFLAG_SKIRT("미니", "빨강")
		CASE 2
			PRINTFORMW 소매가 없고 미니스커트인 선정적인 무녀복를 입게 했습니다

			CSTR:42 = 겨드랑이巫女
			EQUIP:웃옷 = SETFLAG_SHIRT("스커트着用", "ズリ불가", "겨드랑이노출", "무녀복", "순백")
			EQUIP:스커트 = SETFLAG_SKIRT("초미니", "빨강")
		ENDSELECT
	CASE "베이비돌"
		PRINTFORMW 속이 살짝 비치는 사랑스러운 베이비돌로 갈아입게 시켰습니다
	CASE "웨딩드레스"
		PRINTFORMW 순백의 웨딩드레스로 갈아입게 시켰습니다
	CASE "고스로리드레스"
		PRINTFORMW \@ AGE(TARGET) <= 2 ? 이상하게도 귀여운 # 귀여움과의 갭에 요염한 매력을 느끼는 \@고딕＆로리타옷로 갈아입게 했습니다
	CASE "치어리더"
		PRINTFORMW 건강한 매력에, 보는 것만으로도 힘이 날것같은 치어리더 복장으로 갈아입게 했습니다
	CASE "파자마"
		PRINTFORMW 사랑스러운 아이용 파자마롤 갈아입게했습니다. 
	CASE "괴수파자마"
		PRINTFORML 괴수의 모습처럼 보이는, 아이답고 귀여운 파자마입게 했습니다. 
		PRINTFORMW 덧붙여, 위아래가 연결되어있는 구조이기 때문에 화장실 용의 지퍼도 달려있습니다. 
	CASEELSE
		IF CHECK_SHIRT("Ｙ셔츠")
			IF TALENT:작은몸집
				PRINTFORMW %CALLNAME:TARGET%에게 헐렁헐렁한, %CALLNAME:MASTER%의 Ｙ셔츠로 갈아입게 시켰습니다
				PRINTFORMW 워낙 소매에 여유가 있어서, 접어서 손이 나오도록 했습니다
			ELSE
				PRINTFORMW %CALLNAME:TARGET%에게 기장이 약간 긴, %CALLNAME:MASTER%의 Ｙ셔츠로 갈아입게 시켰습니다
				IF TALENT:부끄럼없음 || RAND:6 == 0
					IF CHECK_CLO("블루머노출") || CHECK_CLO("스패츠노출")
						PRINTFORMW 밑단의 겹쳐지는 곳으로 힐끔힐끔 보이는 %조사선택(OUTER(TARGET, 1), "가")% %CALLNAME:MASTER%의 눈을 빼앗고 있습니다…
					ELSEIF CHECK_CLO("팬티노출")
						PRINTFORMW 밑단의 겹쳐지는 곳으로 힐끔힐끔 보이는 %조사선택(PANTIES(TARGET, 1), "가")% %CALLNAME:MASTER%의 눈을 빼앗고 있습니다…
					;보지丸見えor팬티스타킹のみ
					ELSEIF CHECK_CLO("Ｖ노출")
						PRINTFORM 밑단의 겹쳐지는 곳으로 힐끔힐끔 보이는 
						IF COND("음모") >= 5
							LASTWORD = 덤불
						ELSEIF COND("음모") == 4
							LASTWORD = 면도자국
						ELSE
							IF COND("음모") && PENIS(TARGET) == 0 && RAND:2 == 0
								LASTWORD = 털이없는 보지
							ELSE
								LASTWORD = 가랑이
							ENDIF
						ENDIF
						PRINTFORMW %LASTWORD가()% %CALLNAME:MASTER%의 눈을 빼앗고 있습니다…
					ENDIF
				ELSEIF TALENT:부끄럼쟁이 || RAND:5 == 0
					IF RAND:2 == 0
						PRINTFORMW 긴 옷자락을 치마로 삼기에는 부족한 지, 부끄러운 듯이 다리를 비비 꼬고 있습니다…
					ELSE
						PRINTFORMW 긴 옷자락을 치마로 삼기에는 부족한 지, 밑단을 꼭 잡아서 아래로 늘리고 있습니다…
					ENDIF
				ENDIF
			ENDIF
		ELSE
			PRINTFORMW %조사처리(SHIRT(TARGET),"를")% 입게했습니다
		ENDIF
	ENDSELECT
ELSEIF RESULT == 97 && LOCAL:RESULT
	PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% %조사처리(SKIRT(TARGET),"를")% 벗었다…
	CALL SET_SKIRT, TARGET
ELSEIF RESULT == 98 && LOCAL:RESULT
	CALL EVENT_DATUI_FUKU
ELSEIF RESULT == 99 && LOCAL:RESULT
	CALL SET_SHIRT, TARGET, BASE:종족
	PRINTFORMW %조사처리(SHIRT(TARGET),"로")% 갈아입게 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF
RESTART

;-------------------------------------------------
;보디슈츠に関する関数
;-------------------------------------------------
@SELECT_BODYSUIT
#DIM LCOUNT
PRINTL 
VARSET LOCAL
FOR LCOUNT, 0, 20
	LOCALS = %NAME_BODYS(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT

SIF EQUIP:보디슈츠
	PRINTFORML  [98] 벗도록 시킨다
SIF STRLENS(NAME_BODYS(BASE:종족, TARGET) )
	PRINTFORML  [99] %NAME_BODYS(BASE:종족, TARGET)%
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 20 && LOCAL:RESULT
	CALL SET_BODYS, TARGET, RESULT+100
	SELECTCASE RESULT
	CASE 100
		PRINTFORMW 몸의 라인을 강조시키는 , 얇은 레오타드로 갈아입게 시켰습니다
	CASE 101
		PRINTFORMW 신축성 있는 재질이 아슬아슬한 컷으로 가랑이에 먹혀드는 하이레그 레오타드로 갈아입게 시켰습니다
	CASE 102
		PRINTFORMW 에나멜 질감이 굉장히 음란한, 가랑이에 지퍼가 숨어있는 Ｔ백 레오타드로 갈아입게 시켰습니다
	CASE 103
		PRINTFORMW 가랑이와 가슴 주변만 노출된 레오타드로 갈아입게 시켰습니다
	CASE 104
		PRINTFORML 실은 가랑이에 지퍼가 달려있……
		PRINTFORML [ 0] 습니다
		PRINTFORML [ 1] 을리가 있냐! 
		CALL INPUT_SELECT, 2
		SIF RESULT == 0
			CALL CALC, "보디슈츠플래그추가", SETFLAG_BODYS("파스너")
		IF CHECK_BODYS("검정")
			PRINTFORM 귀여운 타이츠 재질의 
		ELSEIF CHECK_BODYS("하양")
			PRINTFORM 청초한 흰색과 정 반대인 요염함과의 갭을 느끼게 해주는
		ELSE
			PRINTFORM 새빨간 
		ENDIF
		PRINTFORMW 바니슈트를 입도록 시켰습니다
		SIF CHECK_BODYS("파스너")
			PRINTFORMW 게다가, 다리사이에는 무슨 용도인지 지퍼가 달려있습니다! 
	CASE 105
		PRINTFORMW 조금 야한 하이레그 바니슈츠로 갈아입게 시켰습니다
	CASE 106
		PRINTFORMW \@ PENIS(TARGET) == 0 ? 가슴이 훤히 보이는 상반신에 # \@가랑이에 지퍼가 달린 본디지로 갈아입게 시켰습니다
	CASE 107
		PRINTFORMW 구형의 학교수영복을 입도록 시켰습니다
	CASE 108
		PRINTFORMW %BODYS(TARGET)%를 입도록 시켰습니다
	CASE 109
		PRINTFORMW 가랑이의 먹힘이 굉장한, 하이레그＆Ｔ백 사양의 원피스수영복을 입게 했습니다
	CASE 110
		PRINTFORMW 적절한 하이레그 컷으로 수영하기 쉬워 보이는 경기용 수영복을 입게 했습니다
	CASEELSE
		PRINTFORMW %조사처리(BODYS(TARGET),"를")% 입게 했습니다
	ENDSELECT
ELSEIF RESULT == 98 && EQUIP:보디슈츠
	CALL EVENT_DATUI_FUKU
ELSEIF RESULT == 99 && STRLENS(NAME_BODYS(BASE:종족, TARGET) )
	CALL SET_BODYS, TARGET, BASE:종족
	PRINTFORMW %조사처리(BODYS(TARGET),"로")% 갈아입게 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

IF EQUIP:보디슈츠 && COND("다리 사용")
	IF CHECK_BODYS("하이레그") && RAND:2
		PRINTFORMW 아까운 듯하지도 않게 노출되고 있는 서경부가, 뭐라고도 훌륭한 경치입니다
	ELSE
		CALL SHOW_PUBICHAIR
	ENDIF
ENDIF

;-------------------------------------------------
;겉옷に関する関数
;-------------------------------------------------
@SELECT_OUTER
#DIM LCOUNT
PRINTL 
VARSET LOCAL
FOR LCOUNT, 0, 50
	LOCALS = %NAME_OUTER(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		SIF LCOUNT < 20
			PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
SIF EQUIP:겉옷
	PRINTFORML  [98] 벗도록 시킨다
SIF STRLENS(NAME_OUTER(BASE:종족, TARGET))
	PRINTFORML  [99] %NAME_OUTER(BASE:종족, TARGET)%
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 49 && LOCAL:RESULT
	CALL SET_OUTER, TARGET, RESULT+100
	IF RESULT == 100
		PRINTFORMW 각선미가 돋보이는 블루머를 입도록 시켰습니다
	ELSEIF RESULT == 101
		PRINTFORMW 먹혀든 가랑이와 엉덩이가 사랑스러운 하이레그 블루머를 입도록 시켰습니다
	ELSEIF RESULT == 102
		PRINTFORMW 허벅지와 허리사이를 절묘하게 조여주는 스패츠를 입도록 시켰습니다
		IF CHECK_CLO("겉옷直穿き")
			IF RAND:2 == 0
				PRINTFORMW 부드러워 보이는 가랑이의 부푼 곳이 굉장히 매력적입니다…
			ELSE
				PRINTFORMW 먹혀든 가랑이가 굉장히 매력적입니다…
			ENDIF
		ELSEIF EQUIP:팬티
			PRINTFORMW 얇아서, %PANTIES(TARGET, 1)%의 라인이 드러나 있습니다…
		ENDIF
	ELSEIF RESULT == 103
		PRINTFORMW 생기넘치는 핫팬츠를 입도록 시켰습니다
	ELSEIF RESULT == 104
		PRINTFORMW 하반신의 라인을 정리하는 얇은 팬티스타킹을 입도록 시켰습니다
	ELSEIF RESULT == 105
		PRINTFORMW 그물코가 굉장히 섹시한 팬티스타킹을 입도록 시켰습니다
	ELSEIF RESULT == 106
		PRINTFORMW 가랑이 부분만 대담하게 열린, 섹시한 팬티스타킹을 입도록 시켰습니다
	ELSEIF RESULT == 107
		PRINTFORMW 노출된 발목이 분위기 있는 레깅스를 입도록 시켰습니다
	ELSEIF RESULT == 108
		PRINTFORMW 아이용 파자마 바지를 입게 했습니다
	ELSE
		PRINTFORMW %조사처리(OUTER(TARGET),"를")% 입도록 시켰습니다
	ENDIF
ELSEIF RESULT == 98 && EQUIP:겉옷
	PRINTFORMW %조사처리(OUTER(TARGET),"를")% 벗도록 시켰습니다
	CALL SET_OUTER, TARGET
ELSEIF RESULT == 99 && STRLENS(NAME_OUTER(BASE:종족, TARGET))
	CALL SET_OUTER, TARGET, BASE:종족
	PRINTFORMW %조사처리(OUTER(TARGET),"를")% 입도록 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF


;-------------------------------------------------
;삭스に関する関数
;-------------------------------------------------
@SELECT_SOCKS
#DIM LCOUNT
PRINTL 
VARSET LOCAL
FOR LCOUNT, 0, 20
	LOCALS = %NAME_SOCKS(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
SIF EQUIP:양말
	PRINTFORML  [98] 벗도록 시킨다
SIF STRLENS(NAME_SOCKS(BASE:종족, TARGET))
	PRINTFORML  [99] %NAME_SOCKS(BASE:종족, TARGET)%
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 19 && LOCAL:RESULT
	CALL SET_SOCKS, TARGET, RESULT+100
	IF RESULT == 100
		PRINTFORMW 양말을 신도록 시켰습니다
	ELSEIF RESULT == 101
		PRINTFORMW 하이삭스를 신도록 시켰습니다
	ELSEIF RESULT == 102
		PRINTFORMW 절대영역이 환상적인 니삭스를 신도록 시켰습니다
	ELSEIF RESULT == 103
		PRINTFORMW 허벅지의 중앙까지 올라오는 사이하이삭스를 신도록 시켰습니다
	ELSEIF RESULT == 104
		PRINTFORMW 중간까지 덮인 허벅지가 매력적인 스타킹을 신도록 시켰습니다
	ELSEIF RESULT == 105
		PRINTFORMW 그물코가 굉장히 섹시한 스타킹을 신도록 시켰습니다
	ELSEIF RESULT == 106
		PRINTFORMW 화려함과 음란함이 조화를 이루는 가터벨트에 매달린 스타킹을 신도록 시켰습니다
	ELSEIF RESULT == 107
		PRINTFORMW 얼룩없이 새하얀 버선을 신도록 시켰습니다
	ELSE
		PRINTFORMW %조사처리(SOCKS(TARGET),"를")% 입도록 시켰습니다
	ENDIF
ELSEIF RESULT == 98 && EQUIP:양말
	PRINTFORMW %조사처리(SOCKS(TARGET),"를")% 벗도록 시켰습니다
	CALL SET_SOCKS, TARGET
ELSEIF RESULT == 99 && STRLENS(NAME_SOCKS(BASE:종족, TARGET))
	CALL SET_SOCKS, TARGET, BASE:종족
	PRINTFORMW %조사처리(SOCKS(TARGET),"를")% 입도록 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

;-------------------------------------------------
;신발に関する関数
;-------------------------------------------------
@SELECT_SHOES
#DIM LCOUNT
PRINTL 
VARSET LOCAL
FOR LCOUNT, 0, 20
	LOCALS = %NAME_SHOES(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
SIF EQUIP:신발
	PRINTFORML  [98] 벗도록 시킨다
SIF STRLENS(NAME_SHOES(BASE:종족, TARGET))
	PRINTFORML  [99] %NAME_SHOES(BASE:종족, TARGET)%
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 19 && LOCAL:RESULT
	CALL SET_SHOES, TARGET, RESULT+100
	PRINTFORMW %조사처리(SHOES(TARGET),"를")% 입도록 시켰습니다
ELSEIF RESULT == 98 && EQUIP:신발
	PRINTFORMW %조사처리(SHOES(TARGET),"를")% 벗도록 시켰습니다
	CALL SET_SHOES, TARGET
ELSEIF RESULT == 99 && STRLENS(NAME_SHOES(BASE:종족, TARGET))
	CALL SET_SHOES, TARGET, BASE:종족
	PRINTFORMW %조사처리(SHOES(TARGET),"를")% 입도록 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

;-------------------------------------------------
;グローブに関する関数
;-------------------------------------------------
@SELECT_GLOVE
#DIM LCOUNT
PRINTL 
VARSET LOCAL
FOR LCOUNT, 0, 20
	LOCALS = %NAME_GLOVE(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		PRINTFORML  [{LCOUNT, 2}] %LOCALS%
		LOCAL:LCOUNT = 1
	ENDIF
NEXT
SIF EQUIP:장갑
	PRINTFORML  [98] 벗도록 시킨다
SIF STRLENS(NAME_GLOVE(BASE:종족, TARGET))
	PRINTFORML  [99] %NAME_GLOVE(BASE:종족, TARGET)%
	PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 19 && LOCAL:RESULT
	CALL SET_GLOVE, TARGET, RESULT+100
	IF RESULT == 100
		PRINTFORMW 감촉이 훌륭한 비단으로 만든 장갑을 끼도록 시켰습니다
	ELSEIF RESULT == 101
		PRINTFORMW 팔뚝 중간까지 올라오는, 센스있는 긴장갑을 끼도록 시켰습니다
	ELSEIF RESULT == 102
		PRINTFORMW 곳곳에 징이 박힌, 가죽으로 된 긴 장갑을 끼도록 시켰습니다
	ELSEIF RESULT == 103
		PRINTFORMW 손목에서 팔뚝까지 올라오는, 장식이 멋진 드레스 슬리브를 끼도록 시켰습니다
	ELSE
		PRINTFORMW %조사처리(GLOVE(TARGET),"를")% 입도록 시켰습니다
	ENDIF
ELSEIF RESULT == 98 && EQUIP:장갑
	PRINTFORMW %조사처리(GLOVE(TARGET),"를")% 벗도록 시켰습니다
	CALL SET_GLOVE, TARGET
ELSEIF RESULT == 99 && STRLENS(NAME_GLOVE(BASE:종족, TARGET))
	CALL SET_GLOVE, TARGET, BASE:종족
	PRINTFORMW %조사처리(GLOVE(TARGET),"를")% 끼도록 시켰습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

;-------------------------------------------------
;メガネなどその他小物に関する関数
;-------------------------------------------------
@SELECT_OTHER
#DIM LCOUNT
PRINTL 
IF EQUIP:악세사리
	PRINTFORM 현재:
	VARSET LOCALS
	SPLIT CSTR:49, "/", LOCALS
	FOR LCOUNT, 0, 5
		SIF LOCALS:LCOUNT != ""
			PRINTFORM [%LOCALS:LCOUNT%]
	NEXT
	PRINTL 
ENDIF
VARSET LOCAL
LOCAL:99 = 0
FOR LCOUNT, 0, 64
	LOCALS = %NAME_OTHER(LCOUNT+100, TARGET)%
	IF STRLENS(LOCALS)
		SELECTCASE LCOUNT
		CASE 0
			PRINTFORML ·목에거는 악세사리
			LOCAL:99 = 0
		CASE 20
			PRINTL 
			PRINTFORML ·안경
			LOCAL:99 = 0
		CASE 25
			PRINTL 
			PRINTFORML ·모자, 귀
			LOCAL:99 = 0
		CASE 30
			PRINTL 
			LOCAL:99 = 0
		CASE 40
			PRINTL 
			PRINTFORML ·머리장식
			LOCAL:99 = 0
		CASE 55
			PRINTL 
			PRINTFORML ·그외의 장식품
			LOCAL:99 = 0
		CASEELSE
			SIF LOCAL:99%2 == 0
				PRINTL 
		ENDSELECT

		PRINTFORM  [{LCOUNT, 2}] %TEXT_LJ(LOCALS, 24)%
		LOCAL:LCOUNT = 1
		LOCAL:99 += 1
	ENDIF
NEXT
PRINTL 
PRINTL 
SIF EQUIP:악세사리
	PRINTFORML  [98] 전부 벗게한다
SIF STRLENS(NAME_OTHER(BASE:종족, TARGET))
	PRINTFORML  [99] %CALLNAME:TARGET%의 평소 세트를 입게 한다

PRINTFORML [100] 돌아간다

$INPUT_LOOP
INPUT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT >= 0 && RESULT <= 63 && LOCAL:RESULT
	LOCAL = RESULT + 100

	VARSET LOCALS
	SPLIT CSTR:49, "/", LOCALS
	FOR LCOUNT, 0, 5
		LOCALS:(LCOUNT+10) = %LOCALS:LCOUNT%
	NEXT

	CALL SET_OTHER, TARGET, LOCAL

	VARSET LOCALS
	SPLIT CSTR:49, "/", LOCALS
	SELECTCASE LOCAL
	CASE 100 TO 119
		IF CHECK_OTHER("首周り")
			PRINTFORMW %조사처리(LOCALS:0,"를")% 걸게 했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:10,"를")% 벗게 했습니다
		ENDIF
	CASE 120 TO 124
		IF CHECK_OTHER("안경等")
			PRINTFORMW %조사처리(LOCALS:1,"를")% 쓰게 했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:11,"를")% 벗게 했습니다
		ENDIF
	CASE 125 TO 129
		IF CHECK_OTHER("帽子")
			PRINTFORMW %조사처리(LOCALS:2,"를")% 쓰게했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:12,"를")% 벗게 했습니다
		ENDIF
	CASE 130 TO 139
		IF CHECK_OTHER("帽子")
			PRINTFORMW %조사처리(LOCALS:2,"를")% 붙이게 했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:12,"를")% 떼게 했습니다
		ENDIF
	CASE 140 TO 154
		IF CHECK_OTHER("머리카락飾り")
			PRINTFORMW %조사처리(LOCALS:3,"를")% 달게 했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:13,"를")% 떼게 했습니다
		ENDIF
	CASE 155 TO 163
		IF CHECK_OTHER("その他装飾具")
			PRINTFORMW %조사처리(LOCALS:4,"를")% 하게 했습니다
		ELSE
			PRINTFORMW %조사처리(LOCALS:14,"를")% 벗게 했습니다
		ENDIF
	ENDSELECT
ELSEIF RESULT == 98 && EQUIP:악세사리
	PRINTW 소품을 벗게 했습니다
	CALL SET_OTHER, TARGET
ELSEIF RESULT == 99 && STRLENS(NAME_OTHER(BASE:종족, TARGET))
	CALL SET_OTHER, TARGET, BASE:종족
	PRINTFORMW %CALLNAME:TARGET%의 평상시의 세트를 입게 했습니다
ELSE
	GOTO INPUT_LOOP
ENDIF

RESTART

;-------------------------------------------------
;현재の衣옷の표기
;ARGS == 短縮表示 の時にはグローブなどを컨피그によっては表示しない
;-------------------------------------------------
@PRINT_DRESS, ARG, ARGS
#DIM LCOUNT

IF EQUIP:ARG:웃옷
	PRINTFORM [%SHIRT(ARG)%\@ CHECK_SHIRT("はだけた", ARG) ? (풀어헤침) # \@\@ CHECK_STAIN(STAIN:ARG:옷, "정액") ? <정액> # \@
	IF CHECK_SHIRT("스커트着用", ARG) && EQUIP:ARG:스커트 == 0
		PRINTFORM (스커트없음)
	ELSEIF CHECK_SHIRT("つなぎ")
		IF CHECK_OUTER("破いた", ARG)
			PRINT (찢어짐)
		ELSEIF CHECK_OUTER("ずらした", ARG)
			PRINT (비껴열림)
		ELSEIF CHECK_OUTER("파스너開", ARG)
			PRINT (열림)
		ELSEIF CHECK_OUTER("슬릿", ARG)
			PRINT (슬릿)
		ELSEIF CHECK_OUTER("ＶＡ노출", ARG)
			PRINT (구멍열림)
		ELSEIF CHECK_OUTER("Ａ노출", ARG)
			PRINT (Ａ구멍열림)
		ELSEIF CHECK_OUTER("Ｖ노출", ARG)
			PRINT (Ｖ구멍열림)
		ELSE
			SIF CHECK_CLO("겉옷直穿き", ARG)
				PRINT (맨발로 신음)
			;汚れ
			IF !CHECK_CLO("Ｖ노출", ARG)
				IF CHECK_STAIN(STAIN:ARG:겉옷, "尿")
					PRINT <오줌>
				ELSEIF CHECK_STAIN(STAIN:ARG:겉옷, "濡れ")
					PRINT <젖음>
				ELSEIF CHECK_STAIN(STAIN:ARG:겉옷, "蒸れ")
					PRINT <열기>
				ENDIF
				;SIF CHECK_STAIN(STAIN:ARG:겉옷, "정액")
				;	PRINT <정액>
			ENDIF
		ENDIF
	ENDIF
	PRINT ]
ENDIF

IF EQUIP:ARG:보디슈츠
	PRINTFORM [%BODYS(ARG)%
	IF CHECK_BODYS("ずらした", ARG)
		PRINT (비껴열림)
	ELSEIF CHECK_BODYS("파스너開", ARG)
		PRINT (열림)
	ELSEIF CHECK_BODYS("ＶＡ노출", ARG)
		PRINT (구멍열림)
	ELSEIF CHECK_BODYS("Ａ노출", ARG)
		PRINT (Ａ구멍열림)
	ELSEIF CHECK_BODYS("Ｖ노출", ARG)
		PRINT (Ｖ구멍열림)
	;汚れ
	ELSE
		IF CHECK_STAIN(STAIN:ARG:보디슈츠바텀, "尿")
			PRINT <오줌>
		ELSEIF CHECK_STAIN(STAIN:ARG:보디슈츠바텀, "濡れ")
			PRINT <젖음>
		ELSEIF CHECK_STAIN(STAIN:ARG:보디슈츠바텀, "蒸れ")
			PRINT <열기>
		ENDIF
		SIF CHECK_STAIN(STAIN:ARG:보디슈츠바텀, "정액")
			PRINT <정액>
	ENDIF
	PRINT ]
ENDIF

;上半身の状態체크
SIF CHECK_CLO("토플리스", ARG)
	PRINT [토플리스]

;브래지어は, 上に何か着ていたりする時などは비표시
SIF EQUIP:ARG:브래지어 && (ARGS != "短縮표시" || EQUIP:ARG:웃옷 + EQUIP:ARG:보디슈츠 == 0)
	PRINTFORM [%BRA(ARG)%\@ CHECK_BRA("ずらした", ARG) ? (ずれ) # \@]

IF EQUIP:ARG:겉옷 && CHECK_OUTER("つなぎ") == 0
	PRINTFORM [%OUTER(ARG)%
	IF CHECK_OUTER("破いた", ARG)
		PRINT (찢어짐)
	ELSEIF CHECK_OUTER("ずらした", ARG)
		PRINT (비껴열림)
	ELSEIF CHECK_OUTER("파스너開", ARG)
		PRINT (열림)
	ELSEIF CHECK_OUTER("슬릿", ARG)
		PRINT (슬릿)
	ELSEIF CHECK_OUTER("ＶＡ노출", ARG)
		PRINT (구멍열림)
	ELSEIF CHECK_OUTER("Ａ노출", ARG)
		PRINT (Ａ구멍열림)
	ELSEIF CHECK_OUTER("Ｖ노출", ARG)
		PRINT (Ｖ구멍열림)
	ELSE
		SIF CHECK_CLO("겉옷直穿き", ARG)
			PRINT (맨발로 신음)
		;汚れ
		IF !CHECK_CLO("Ｖ노출", ARG)
			IF CHECK_STAIN(STAIN:ARG:겉옷, "尿")
				PRINT <오줌>
			ELSEIF CHECK_STAIN(STAIN:ARG:겉옷, "濡れ")
				PRINT <젖음>
			ELSEIF CHECK_STAIN(STAIN:ARG:겉옷, "蒸れ")
				PRINT <열기>
			ENDIF
			SIF CHECK_STAIN(STAIN:ARG:겉옷, "정액")
				PRINT <정액>
		ENDIF
	ENDIF
	PRINT ]
ENDIF

IF ARGS == "短縮표시" && CONFIG("下着が見えない服装時の표시の제한") && CHECK_CLO("겉옷노출", ARG) + CHECK_CLO("보디슈츠노출", ARG)
ELSEIF EQUIP:ARG:팬티
	PRINTFORM [%PANTIES(ARG)%
	IF CHECK_PANTIES("ずらした", ARG)
		PRINT (비껴냄)
	ELSEIF CHECK_PANTIES("파스너開", ARG)
		PRINT (열림)
	ELSEIF CHECK_PANTIES("ＶＡ노출", ARG)
		PRINT (구멍열림)
	ELSEIF CHECK_PANTIES("Ａ노출", ARG)
		PRINT (Ａ구멍열림)
	ELSEIF CHECK_PANTIES("Ｖ노출", ARG)
		PRINT (Ｖ구멍열림)
	ELSE
		IF CHECK_STAIN(STAIN:ARG:팬티, "尿")
			PRINT <오줌>
		ELSEIF CHECK_STAIN(STAIN:ARG:팬티, "濡れ")
			PRINT <젖음>
		ELSEIF CHECK_STAIN(STAIN:ARG:팬티, "蒸れ")
			PRINT <열기>
		ENDIF
		SIF CHECK_STAIN(STAIN:ARG:팬티, "정액")
			PRINT <정액>
	ENDIF
	PRINT ]
ENDIF

IF CHECK_CLO("알몸", ARG)
	PRINT [알몸]
ELSEIF CHECK_CLO("바텀리스", ARG)
	PRINT [바텀리스]
ELSEIF CHECK_CLO("노팬티", ARG)
	PRINT [노팬티]
ENDIF

SIF EQUIP:ARG:양말
	PRINTFORM [%SOCKS(ARG)%\@ CHECK_STAIN(STAIN:ARG:삭스, "정액") ? <정액> # \@]

IF EQUIP:ARG:악세사리
	VARSET LOCALS
	SPLIT CSTR:ARG:49, "/", LOCALS
	FOR LCOUNT, 0, 5
		SIF LOCALS:LCOUNT != ""
			PRINTFORM [%LOCALS:LCOUNT%]
	NEXT
ENDIF

;신발と장갑の表示컨피그
IF ARGS == "短縮표시"
	SELECTCASE CONFIG("신발やグローブの표기")
	CASE 1
		RETURN 0
	CASE 2
		SIF CHECK_CLO("알몸", ARG) == 0
			RETURN 0
	ENDSELECT
ENDIF

SIF EQUIP:ARG:신발
	PRINTFORM [%SHOES(ARG)%\@ CHECK_STAIN(STAIN:ARG:신발, "정액") ? <정액> # \@]

SIF EQUIP:ARG:장갑
	PRINTFORM [%GLOVE(ARG)%\@ CHECK_STAIN(STAIN:ARG:신발, "정액") ? <정액> # \@]


;--------------------------------------------------------
;自発脱ぎ
;--------------------------------------------------------
@EVENT_DATUI
;몽마が自分で脱いでくるのはどうだろう
;脱がないようにお願い中or75%で脱いでこない
SIF CONFIG("衣装の自動脱ぎの금지") || RAND:4 || (BASE:기력 <= 0 && BASE:성욕 >= MAXBASE:성욕)
	RETURN 0
;팬티훑기커맨드
SIF PREVCOM == 97 && (CHECK_COM("Ａ자극손훑기") || CHECK_COM("파후파후손훑기") )
	RETURN 0
;식스나인, 러브트랩, 緊縛, 촉수, 아이마스크中は脱いでこない
SIF TEQUIP:러브트랩 || TEQUIP:아이마스크 || TEQUIP:구속 || TEQUIP:식스나인 || TEQUIP:촉수 || TEQUIP:딥스로트
	RETURN 0
;인서트, 절정中は脱いできません
SIF INSERT("인서트") || INSERT("삽입中") || NOWEX:절정수합계
	RETURN 0
;既に알몸
SIF CHECK_CLO("알몸")
	RETURN 0

;初期値は0～5
LOCAL = RAND:6

SELECTCASE SELECTCOM
;애무, 가슴애무, 키스は我慢できずに脱いでくる확률アップ
CASE 0, 5, 6
	LOCAL += 5
;섹스系
CASE 60 TO 89, 120 TO 129, 160 TO 169
	RETURN 0
;コスプレ系
CASE 97, 100, 175
	RETURN 0
;아이템系or특수커맨드系
CASE 230 TO 279, 300 TO 302, 304, 305, 309
	RETURN 0
ENDSELECT

;강기, 호기심, 정조관결여, 눈에띄고싶어함, 부끄럼없음, 호색, 음란で보너스
LOCAL += TALENT:강기*10 + TALENT:호기심*2 + TALENT:정조관결여*2 + TALENT:눈에띄고싶어함*3 + TALENT:부끄럼없음*4 + TALENT:호색*5 + TALENT:음란*5
;겁쟁이, 自制心, 보수적, 정조관념, 부끄럼쟁이でペナルティ
LOCAL -= TALENT:겁쟁이*3 + TALENT:냉정*2 + TALENT:보수적*2 + TALENT:부끄럼쟁이*3
;욕망, 노출벽, Ｖ윤, 욕정で보너스
LOCAL += (ABL:욕망 + 1)/2 + (ABL:노출벽 + 1)/2 + GET_PALAMLV(PALAM:Ｖ윤 + PALAM:욕정)
;미약
SIF TEQUIP:미약
	LOCAL += 5
;押し倒されている
SIF TEQUIP:넘어뜨리기
	LOCAL += 3
;황홀状態
SIF STATE("황홀", PLAYER)
	LOCAL += 3

;비디오카메라
IF TEQUIP:비디오카메라
	LOCAL -= 5
	SIF ABL:노출벽 >= 3
		LOCAL += 3
	SIF ABL:노출벽 >= 5
		LOCAL += 3
ENDIF

;야외플레이(마을)
IF COND("마을")
	LOCAL -= 10
	SIF ABL:노출벽 == 3
		LOCAL += 4
	SIF ABL:노출벽 == 4
		LOCAL += 8
	SIF ABL:노출벽 >= 5
		LOCAL += 12
	SIF TIME == 0
		LOCAL -= 5
;야외플레이(마을以外)
ELSEIF TEQUIP:야외플레이
	LOCAL -= 3
	SIF ABL:노출벽 >= 3
		LOCAL += 1
	SIF ABL:노출벽 >= 5
		LOCAL += 3
	SIF TIME == 0
		LOCAL -= 3
ENDIF

;服装による, 脱いでくる条件の보정
;삽입系が選べない服装だと脱いできやすい
SIF CHECK_CLO("Ｖ노출可") == 0 && CHECK_CLO("Ａ노출可") == 0
	LOCAL += 10

;무드が低いと脱いでこない
SELECTCASE MOOD_HEART()
CASE 0
	LOCAL /= 10
CASE IS < 3
	LOCAL /= 2
CASE IS >= 4
	LOCAL += 10
ENDSELECT

;まずは全裸化체크(コスプレは脱ぎません)
IF CHECK_CLO("自分の옷") == 0
ELSEIF LOCAL >= 30 && RAND:3 == 0
	PRINTL 
	PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% 옷을 벗고 알몸이 되었다…
	CALL SETFLAG, "전부벗긴다", TARGET
	CALL SELF_KOJO, "自発脱ぎ"
	RETURN 0
ENDIF

;既に가랑이が노출している
SIF CHECK_CLO("Ｖ노출") || CHECK_CLO("Ａ노출")
	RETURN 0

IF CHECK_CLO("보디슈츠노출")
	IF CHECK_BODYS("파스너閉") && LOCAL >= 20
		PRINTL 
		PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 가볍게 다리를 벌리고, %BODYS(TARGET, 1)%의 가랑이부분에 숨겨진 지퍼를 내렸다
		CALL CALC, "보디슈츠플래그추가", SETFLAG_OUTER("파스너開")
		IF (TALENT:연모 || TALENT:부끄럼없음) && TALENT:남자 == 0 && CHECK_CLO("Ｖ노출")
			PRINTW . 
			PRINTFORMW 손가락으로 벌려진 개구부에서는, %조사처리(TEXTS("보지：視覚"),"가")% 보인다…
		ELSE
			PRINTFORMW …
		ENDIF
		CALL SELF_KOJO, "自発脱ぎ"
	ENDIF
ELSEIF CHECK_CLO("팬티스타킹노출")
	IF PALAM:욕정 < 30000
	ELSEIF LOCAL >= 15
		PRINTL 
		PRINTFORM %조사처리(CALLNAME:TARGET,"는")% %조사처리(OUTER(TARGET, 1),"를")% 찢고 
		CALL CALC, "겉옷플래그추가", SETFLAG_OUTER("破いた")
		IF CHECK_CLO("Ｖ노출")
			PRINTFORMW \@ PENIS(TARGET) ? 가랑이 # 보지 \@를 노출시켰다…
		ELSE
			PRINTW 팬티를 과시했다…
		ENDIF
		CALL SELF_KOJO, "自発脱ぎ"
	ENDIF
;블루머は脱ぎません
ELSEIF CHECK_OUTER("블루머")
ELSEIF CHECK_CLO("겉옷노출")
	IF CHECK_OUTER("파스너")
		IF CHECK_OUTER("파스너閉") && LOCAL >= 20
			PRINTL 
			PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 가볍게 다리를 벌리고, %OUTER(TARGET, 1)%의 가랑이 부분을 감추고 있던 지퍼를 내렸다
			CALL CALC, "겉옷플래그추가", SETFLAG_OUTER("파스너開")
			IF (TALENT:연모 || TALENT:부끄럼없음) && TALENT:남자 == 0 && CHECK_CLO("Ｖ노출")
				PRINTW . 
				PRINTFORMW 손가락으로 벌린 개구부에서는, %조사처리(TEXTS("보지：視覚"),"가")% 보이고있다…
			ELSE
				PRINTFORMW …
			ENDIF
			CALL SELF_KOJO, "自発脱ぎ"
		ENDIF
	;팬티も穿いている
	ELSEIF EQUIP:팬티 && LOCAL >= 30
		PRINTL 
		PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% 속옷 째 %조사처리(OUTER(TARGET, 1),"를")% 벗었다…
		CALL SET_OUTER, TARGET
		CALL SET_PANTIES, TARGET
		CALL SELF_KOJO, "自発脱ぎ"
	ELSEIF LOCAL >= 10
		PRINTL 
		PRINTFORM %조사처리(CALLNAME:TARGET,"는")% %OUTER(TARGET, 1)%
		IF TALENT:남자 == 0 && TEQUIP:넘어뜨리기 && TALENT:부끄럼없음 + TALENT:호색 + TALENT:음란 + TALENT:소악마 - TALENT:부끄럼쟁이 - TALENT:청초 > 0
			PRINTFORMW %조사만처리(OUTER(TARGET, 1),"를")% 벗어서, %CALLNAME:PLAYER%의 얼굴 위에 떨어뜨렸다…
			SIF PALAM:Ｖ윤 >= 3000 && PALAM:욕정 >= 3000 && RAND:3 == 0
				PRINTFORMW %CALLNAME:PLAYER%의 비강에, 조금 습기찬 옷감의 %조사처리(TEXTS("匂い"),"이")% 흘러 온다…
		ELSE
			PRINTFORMW %조사만처리(OUTER(TARGET, 1),"를")% 벗었다…
		ENDIF
		CALL SET_OUTER, TARGET
		CALL SELF_KOJO, "自発脱ぎ"
	ENDIF
ELSEIF CHECK_CLO("팬티노출")
	;파스너優先
	IF CHECK_PANTIES("파스너閉") && LOCAL >= 20
		PRINTL 
		PRINTFORM %조사처리(CALLNAME:TARGET,"는")% 가랑이 부분의 지퍼를 내렸다
		CALL CALC, "팬티플래그추가", SETFLAG_PANTIES("파스너開")
		IF TALENT:남자 == 0 && (TALENT:연모 || TALENT:부끄럼없음) && CHECK_CLO("Ｖ노출")
			PRINTW . 
			PRINTFORMW 손가락으로 벌려진 개구부에서는, %조사처리(TEXTS("보지：視覚"),"가")% 보인다…
		ELSE
			PRINTFORMW …
		ENDIF
		CALL SELF_KOJO, "自発脱ぎ"
	ELSEIF CHECK_PANTIES("탈의불가") == 0 && LOCAL >= 20
		PRINTL 
		IF TEQUIP:넘어뜨리기 && TALENT:부끄럼없음 + TALENT:호색 + TALENT:음란 + TALENT:소악마 - TALENT:부끄럼쟁이 - TALENT:청초 > 0
			PRINTFORM %조사처리(CALLNAME:TARGET,"는")% %PANTIES(TARGET, 1)%
			IF CHECK_PANTIES("Ｃ스트링")
				PRINT 를 제외해, 
			ELSEIF CHECK_PANTIES("끈")
				PRINT 의 매듭을 한쪽씩 천천히 풀고, 
			ELSE
				PRINTFORM %조사만처리(PANTIES(TARGET, 1),"를")% 벗고, 
			ENDIF
			IF TEQUIP:안면기승
				PRINTFORMW %CALLNAME:PLAYER%의 얼굴에 자세를 고쳐앉았다…
			ELSE
				PRINTFORMW %CALLNAME:PLAYER%의 얼굴 위에 떨어뜨렸다…
			ENDIF
			IF TALENT:남자 == 0 && PALAM:Ｖ윤 >= 3000 && PALAM:욕정 >= 3000 && RAND:3 == 0
				IF RAND:2 && CHECK_PANTIES("Ｃ스트링") == 0
					PRINTFORMW 많이 더러운 부분에 \@ CHECK_CLO("食い込み") ? 먹혀있던 # 닿아있던 \@ 가랑이의 옷감은, 안에서 넘쳐난 %TEXTR("끈적거리는", "음란한")% 즙으로 진한 색때문에 완전히 색이 변해있다…
				ELSE
					PRINTFORMW %CALLNAME:PLAYER%의 비강을%CALLNAME:TARGET%의 %조사처리(TEXTS("匂い"),"가")% 자극한다…
				ENDIF
			ENDIF
		ELSE
			PRINTFORM %조사처리(CALLNAME:TARGET,"는")% %PANTIES(TARGET, 1)%
			IF CHECK_PANTIES("끈")
				PRINTFORMW 의 매듭을 천천히 풀었다…
			ELSEIF TALENT:부끄럼없음 && RAND:3 == 0
				PRINTFORMW  %조사만처리(PANTIES(TARGET, 1),"를")% 벗고, %조사처리(CALLNAME:PLAYER,"를")% 향해 던졌다…
			ELSEIF ABL:노출벽 + TALENT:호색 && CHECK_PANTIES("男物") == 0 && CHECK_PANTIES("Ｃ스트링") == 0 && RAND:2
				PRINTFORMW 에서 한쪽 발만 빼고, 남은 발목에 휘감았다…
			ELSEIF RAND:2 && TALENT:남자 == 0 && COND("음모") && COND("음모") != 6
				PRINTFORM %조사만처리(PANTIES(TARGET, 1),"를")% 벗고, 
				SIF RAND:2 && CHECK_PANTIES("Ｈ")
					PRINT 어른같은 속옷안에 숨겨져있던 
				SELECTCASE COND("음모")
				CASE 1
					PRINT 털없는 
				CASE 2
					PRINT 탈모처리가 끝난 
				CASE 3
					IF RAND:2
						PRINT 제모한 
					ELSE
						PRINT 맨들맨들한 
					ENDIF
				CASE 4
					;剃り跡
					IF CONDS("음모") == "剃り跡"
						PRINT 면도자국이 눈에 띄는 
					ELSE
						PRINT 음모가 옅은 
					ENDIF
				CASE 5
					IF RAND:2
						PRINT 손질이 끝난 
					ELSE
						PRINT 손질로 가꾸어진 
					ENDIF
				CASE 6
					PRINT 부드러운 덩굴로 덮인 
				CASE 7
					PRINT 털이 수북한 
				ENDSELECT
				PRINTFORMW 보지를 드러냈다…
			ELSE
				PRINTFORMW %조사만처리(PANTIES(TARGET, 1),"를")% 벗었다…
			ENDIF
			IF TALENT:남자 == 0 && PALAM:Ｖ윤 >= 3000 && PALAM:욕정 >= 3000 && RAND:3 == 0
				IF CHECK_PANTIES("通気性없음") && TALENT:남자 == 0
					PRINTFORMW 통기성이 없는 옷감으로 밀봉되고 있던 그곳의 발정한 %조사처리(TEXTS("匂い"),"가")% 금새 근처에 자욱한다…
				ELSEIF CHECK_PANTIES("男物") == 0
					PRINTFORMW 팬티의 가랑이 부분에는 숨길 수 없을 정도로 얼룩이 져 있었다…
				ENDIF
			ENDIF
		ENDIF
		CALL SET_PANTIES, TARGET
		CALL SELF_KOJO, "自発脱ぎ"
	ENDIF
ENDIF


;ずらした팬티とかを直す
@EVENT_ZURENAOSHI
;67%で直さない
SIF RAND:3 || BASE:기력 <= 0 || TALENT:남자
	RETURN 0
;ずらしてない
SIF CHECK_CLO("ずらした") == 0
	RETURN 0

SELECTCASE SELECTCOM
;가랑이弄り系, 責められ系等
CASE 1 TO 4, 7 TO 59, 130 TO 138, 140 TO 159
	RETURN 0
;섹스系
CASE 60 TO 89, 120 TO 129, 160 TO 169
	RETURN 0
;コスプレ系
CASE 97, 100, 175
	RETURN 0
;아이템系or특수커맨드系
CASE 230 TO 279, 282, 300 TO 302, 304, 305, 309
	RETURN 0
ENDSELECT

;팬티훑기커맨드
SIF PREVCOM == 97 && (CHECK_COM("Ａ자극손훑기") || CHECK_COM("파후파후손훑기") )
	RETURN 0
;식스나인, 러브트랩, 緊縛, 촉수, 아이마스크中
SIF TEQUIP:안면기승 || TEQUIP:러브트랩 || TEQUIP:아이마스크 || TEQUIP:구속 || TEQUIP:식스나인 || TEQUIP:촉수 || TEQUIP:딥스로트 || TEQUIP:PLAYER:자위한다
	RETURN 0
;인서트中, 절정
SIF INSERT("인서트") || INSERT("삽입中") || NOWEX:절정수합계
	RETURN 0

;ARGが0でないなら텍스트は出力しない
VARSET LOCALS
SIF EQUIP:보디슈츠 && CHECK_BODYS("ずらした")
	LOCALS = %조사처리(BODYS(TARGET, 1),"과")% 
SIF EQUIP:겉옷 && CHECK_OUTER("ずらした")
	LOCALS = %LOCALS% %조사처리(OUTER(TARGET, 1),"과")% 
SIF EQUIP:팬티 && CHECK_PANTIES("ずらした")
	LOCALS = %LOCALS% %조사처리(PANTIES(TARGET, 1),"과")% 

PRINTL 
PRINTFORMW %조사처리(CALLNAME:TARGET,"는")% %SUBSTRING(LOCALS, 0, STRLENS(LOCALS) - 1)%의 매무새를 자연스럽게 고쳤다…
CALL SETFLAG, "ボトムずれ直し", TARGET


@COM_ORDER_COM175, ARG
VARSET LOCAL
LOCALS = 

;すべての命令に共通の요정素を考慮
;(순종が高いと命令に従いやすいなど)
CALL COM_ORDER, ARG

LOCAL = RESULT

;ABL:노출벽
IF ABL:노출벽
	LOCAL += ABL:노출벽 * 5
	LOCALS = %LOCALS% + %ABLNAME:7%LV{ABL:노출벽}({ABL:노출벽 * 5})
ENDIF
;부끄럼쟁이
IF TALENT:부끄럼쟁이
	LOCAL -= 30
	LOCALS = %LOCALS% - %TALENTNAME:35%(30)
ENDIF
;부끄럼없음
IF TALENT:부끄럼없음
	LOCAL += 24
	LOCALS = %LOCALS% + %TALENTNAME:36%(24)
ENDIF

;구속中
IF TEQUIP:구속
	LOCAL += 30
	LOCALS = %LOCALS% + 구속중(30)
ENDIF
;ビデオ촬영
IF TEQUIP:비디오카메라
	LOCAL -= 10
	LOCALS = %LOCALS% - 촬영중(10)
ENDIF
;야외or관내노출
IF TEQUIP:야외플레이
	LOCAL -= 10
	LOCALS = %LOCALS% - 야외플레이(10)
ELSEIF TEQUIP:관내노출플레이
	LOCAL -= 10
	LOCALS = %LOCALS% - 관내노출(10)
ENDIF

;合計を表示(35이상で実行)
CALL PRINT_COM_ORDER_COM, LOCALS, ARG, LOCAL, 35

RETURN RESULT
